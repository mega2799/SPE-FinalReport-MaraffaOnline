<!doctype html>
<html >
<head>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!--[if lt IE 9]>
                <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
        <![endif]-->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />

    <!-- <link rel="stylesheet" type="text/css" href="template.css" /> -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/template.css" />

    <link href="https://vjs.zencdn.net/5.4.4/video-js.css" rel="stylesheet" />

    <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
    <!-- <script type='text/javascript' src='menu/js/jquery.cookie.js'></script> -->
    <!-- <script type='text/javascript' src='menu/js/jquery.hoverIntent.minified.js'></script> -->
    <!-- <script type='text/javascript' src='menu/js/jquery.dcjqaccordion.2.7.min.js'></script> -->

    <!-- <link href="menu/css/skins/blue.css" rel="stylesheet" type="text/css" /> -->
    <!-- <link href="menu/css/skins/graphite.css" rel="stylesheet" type="text/css" /> -->
    <!-- <link href="menu/css/skins/grey.css" rel="stylesheet" type="text/css" /> -->
  
    <!-- <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
        
  
    <!-- <script src="script.js"></script> -->
  
    <!-- <script src="jquery.sticky-kit.js "></script> -->
    <script type='text/javascript' src='https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/js/jquery.cookie.js'></script>
    <script type='text/javascript' src='https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/js/jquery.hoverIntent.minified.js'></script>
    <script type='text/javascript' src='https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/js/jquery.dcjqaccordion.2.7.min.js'></script>

    <link href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/css/skins/blue.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/css/skins/graphite.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/menu/css/skins/grey.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/gh/ryangrose/easy-pandoc-templates@948e28e5/css/elegant_bootstrap.css" rel="stylesheet" type="text/css" />
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  
    <script src="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/script.js"></script>
  
    <script src="https://cdn.jsdelivr.net/gh/diversen/pandoc-bootstrap-adaptive-template@959c3622/jquery.sticky-kit.js"></script>
    <meta name="generator" content="pandoc" />
  <title>SPE Final Report</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    background-color: #ffffff;
    color: #a0a0a0;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #a0a0a0;  padding-left: 4px; }
div.sourceCode
  { color: #1f1c1b; background-color: #ffffff; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span { color: #1f1c1b; } /* Normal */
code span.al { color: #bf0303; background-color: #f7e6e6; font-weight: bold; } /* Alert */
code span.an { color: #ca60ca; } /* Annotation */
code span.at { color: #0057ae; } /* Attribute */
code span.bn { color: #b08000; } /* BaseN */
code span.bu { color: #644a9b; font-weight: bold; } /* BuiltIn */
code span.cf { color: #1f1c1b; font-weight: bold; } /* ControlFlow */
code span.ch { color: #924c9d; } /* Char */
code span.cn { color: #aa5500; } /* Constant */
code span.co { color: #898887; } /* Comment */
code span.cv { color: #0095ff; } /* CommentVar */
code span.do { color: #607880; } /* Documentation */
code span.dt { color: #0057ae; } /* DataType */
code span.dv { color: #b08000; } /* DecVal */
code span.er { color: #bf0303; text-decoration: underline; } /* Error */
code span.ex { color: #0095ff; font-weight: bold; } /* Extension */
code span.fl { color: #b08000; } /* Float */
code span.fu { color: #644a9b; } /* Function */
code span.im { color: #ff5500; } /* Import */
code span.in { color: #b08000; } /* Information */
code span.kw { color: #1f1c1b; font-weight: bold; } /* Keyword */
code span.op { color: #1f1c1b; } /* Operator */
code span.ot { color: #006e28; } /* Other */
code span.pp { color: #006e28; } /* Preprocessor */
code span.re { color: #0057ae; background-color: #e0e9f8; } /* RegionMarker */
code span.sc { color: #3daee9; } /* SpecialChar */
code span.ss { color: #ff5500; } /* SpecialString */
code span.st { color: #bf0303; } /* String */
code span.va { color: #0057ae; } /* Variable */
code span.vs { color: #bf0303; } /* VerbatimString */
code span.wa { color: #bf0303; } /* Warning */
  </style>
</head>
<body>

    
    <div class="navbar navbar-static-top">
    <div class="navbar-inner">
      <div class="container">
        <span class="doc-title">SPE Final Report</span>
        <ul class="nav pull-right doc-info">
                            </ul>
      </div>
    </div>
  </div>
    <div class="container">
    <div class="row">
            <div id="TOC" class="span3">
        <div class="well toc">

        <ul>
        <li><a href="#list-of-abbreviations"
        id="toc-list-of-abbreviations">List of Abbreviations</a></li>
        <li><a href="#ch:into" id="toc-ch:into">Introduction</a></li>
        <li><a href="#ch:ddd" id="toc-ch:ddd">Domain Driven Design</a>
        <ul>
        <li><a
        href="#knowledge-crunching-session-for-the-exploration-of-the-problem-space"
        id="toc-knowledge-crunching-session-for-the-exploration-of-the-problem-space">Knowledge
        crunching session for the exploration of the problem
        space</a></li>
        <li><a href="#ubiquitos-language"
        id="toc-ubiquitos-language">Ubiquitos Language</a></li>
        <li><a href="#bounded-context" id="toc-bounded-context">Bounded
        Context</a></li>
        <li><a href="#requisiti-e-casi-duso"
        id="toc-requisiti-e-casi-duso">Requisiti e casi d’uso</a>
        <ul>
        <li><a href="#requisiti" id="toc-requisiti">Requisiti</a></li>
        <li><a href="#casi-duso" id="toc-casi-duso">Casi d’uso</a></li>
        </ul></li>
        <li><a href="#pattern-del-ddd" id="toc-pattern-del-ddd">Pattern
        del DDD</a></li>
        <li><a href="#design-generale-del-software"
        id="toc-design-generale-del-software">Design generale del
        software</a></li>
        </ul></li>
        <li><a href="#ch:implementation"
        id="toc-ch:implementation">Implementation</a>
        <ul>
        <li><a href="#componenti" id="toc-componenti">Componenti</a>
        <ul>
        <li><a href="#servizi-di-business-logic-e-user-service"
        id="toc-servizi-di-business-logic-e-user-service">Servizi di
        Business Logic e User Service</a></li>
        <li><a href="#front-end" id="toc-front-end">Front-End</a></li>
        <li><a href="#middleware"
        id="toc-middleware">Middleware</a></li>
        </ul></li>
        <li><a href="#tecnologie" id="toc-tecnologie">Tecnologie</a>
        <ul>
        <li><a href="#swagger---openapi"
        id="toc-swagger---openapi">Swagger - OpenAPI</a></li>
        <li><a href="#postman" id="toc-postman">Postman</a></li>
        <li><a href="#log-automatici" id="toc-log-automatici">Log
        automatici</a></li>
        <li><a href="#lettura-variabili-dambiente"
        id="toc-lettura-variabili-dambiente">Lettura variabili
        d’ambiente</a></li>
        </ul></li>
        </ul></li>
        <li><a href="#ch:DevOps" id="toc-ch:DevOps">DevOps</a>
        <ul>
        <li><a href="#semantic-versioning-changelog-e-secrets"
        id="toc-semantic-versioning-changelog-e-secrets">Semantic
        Versioning, changelog e secrets</a>
        <ul>
        <li><a href="#semantic-versioning"
        id="toc-semantic-versioning">Semantic Versioning</a></li>
        <li><a href="#changelog-e-secrets"
        id="toc-changelog-e-secrets">Changelog e secrets</a></li>
        </ul></li>
        <li><a href="#licensing-e-issue-template"
        id="toc-licensing-e-issue-template">Licensing e issue
        template</a></li>
        <li><a href="#dvcs" id="toc-dvcs">DVCS</a>
        <ul>
        <li><a href="#struttura-dei-branch"
        id="toc-struttura-dei-branch">Struttura dei Branch</a></li>
        <li><a href="#struttura-delle-repository"
        id="toc-struttura-delle-repository">Struttura delle
        repository</a></li>
        <li><a href="#pull-request-e-code-review"
        id="toc-pull-request-e-code-review">Pull Request e Code
        Review</a></li>
        <li><a href="#gestione-dei-conflitti"
        id="toc-gestione-dei-conflitti">Gestione dei Conflitti</a></li>
        <li><a href="#commit-verification"
        id="toc-commit-verification">Commit verification</a></li>
        <li><a href="#conventional-commits"
        id="toc-conventional-commits">Conventional commits</a></li>
        </ul></li>
        <li><a href="#git-hooks" id="toc-git-hooks">Git Hooks:</a></li>
        <li><a href="#build-automation" id="toc-build-automation">Build
        automation</a>
        <ul>
        <li><a href="#scheletro-del-workflow"
        id="toc-scheletro-del-workflow">Scheletro del workflow</a></li>
        <li><a href="#usermanagement-e-businesslogic"
        id="toc-usermanagement-e-businesslogic">UserManagement e
        BusinessLogic</a></li>
        <li><a href="#middleware-1"
        id="toc-middleware-1">Middleware</a></li>
        <li><a href="#frontend" id="toc-frontend">Frontend</a></li>
        </ul></li>
        <li><a href="#continuous-integration"
        id="toc-continuous-integration">Continuous Integration</a></li>
        <li><a href="#automated-quality-assurance"
        id="toc-automated-quality-assurance">Automated quality
        assurance</a>
        <ul>
        <li><a href="#testing" id="toc-testing">Testing</a></li>
        <li><a href="#act-per-testare-ci"
        id="toc-act-per-testare-ci">Act per testare CI</a></li>
        </ul></li>
        <li><a href="#code_quality" id="toc-code_quality">Code quality e
        linting</a>
        <ul>
        <li><a href="#checkstyle-javadoc-github-page"
        id="toc-checkstyle-javadoc-github-page">Checkstyle, javadoc,
        github page </a></li>
        </ul></li>
        <li><a href="#containerization"
        id="toc-containerization">Containerization</a>
        <ul>
        <li><a href="#nodejs" id="toc-nodejs">NodeJS</a></li>
        <li><a href="#java" id="toc-java">Java</a></li>
        <li><a href="#angular" id="toc-angular">Angular</a></li>
        </ul></li>
        <li><a href="#lettura-variabili-dambiente-1"
        id="toc-lettura-variabili-dambiente-1">Lettura variabili
        d’ambiente</a></li>
        <li><a href="#monitoraggio"
        id="toc-monitoraggio">Monitoraggio</a>
        <ul>
        <li><a href="#grafana" id="toc-grafana">Grafana</a></li>
        <li><a href="#prometheus"
        id="toc-prometheus">Prometheus</a></li>
        <li><a href="#cadvisor" id="toc-cadvisor">cAdvisor</a></li>
        <li><a href="#integrazione-e-configurazione"
        id="toc-integrazione-e-configurazione">Integrazione e
        Configurazione</a></li>
        </ul></li>
        <li><a href="#docker-compose"
        id="toc-docker-compose">Docker-compose</a></li>
        <li><a href="#cicd" id="toc-cicd">CI/CD</a></li>
        </ul></li>
        <li><a href="#ch:con" id="toc-ch:con">Conclusions and Future
        Work</a>
        <ul>
        <li><a href="#conclusioni"
        id="toc-conclusioni">Conclusioni</a></li>
        </ul></li>
        </ul>

        </div>
      </div>
            <div class="span9">

      
      <div class="titlepage">
<div class="center">
<p><span>Software Process Engineering</span><br />
</p>
<p>Maraffa Online</p>
<p> <br />
<span> Sofia Tosi, Matteo Santoro </span><br />
</p>
<p>2025-01-12</p>
</div>
</div>
<h2 id="list-of-abbreviations">List of Abbreviations</h2>
<div class="abbrv">
<p>School of Mathematical, Physical and Computational Sciences</p>
</div>
<h1 id="ch:into">Introduction</h1>
<p>MaraffaOnline è un’applicazione che permette alle persone di giocare
al gioco di carte <a
href="https://it.wikipedia.org/wiki/Marafone_Beccacino">Maraffa/Beccacino</a>.
Il progetto consiste nell’eseguire una manutenzione evolutiva del gioco
di carte reperibile su MaraffaOnline, attualmente sviluppato dalla
prof.ssa Lumini. In particolare la nuova versione avrà un’architettura a
microservizi e introdurrà anche nuove funzionalità come formazione
personalizzata delle squadre, una nuova modalità di gioco (vittoria 11 a
0 in caso di violazione delle regole da parte di una squadra),
salvataggio delle statistiche delle partite e degli utenti, ...<br />
Per lo sviluppo è stato seguito un approccio Domain Driven Design, per
il quale si è approfondito il dominio del gioco.<br />
È stata posta particolare attenzione alle tecniche di continuos
integration, alle quali è stato dedicato uno dei capitoli di questo
report.</p>
<h1 id="ch:ddd">Domain Driven Design</h1>
<h2
id="knowledge-crunching-session-for-the-exploration-of-the-problem-space">Knowledge
crunching session for the exploration of the problem space</h2>
<p>Per ottenere maggior chiarezza sul dominio è stato utilizzato il
metodo Event Storming. La tecnica consiste nell’individuare degli eventi
di dominio e riportarli al passato su un post-it arancione. Una volta
individuati gli eventi, sono stati scritti su post-it blu i comandi che
l’utente svolge per creare l’evento. In giallo è stato specificato
l’attore, la persona che esegue il comando, mentre in verde la view,
l’interfaccia software con la quale l’utente interagisce. Infine, con
delle label si sono aggregati i post-it in unità di dominio. Si riporta
di seguito lo screen della lavagna con i post-it e la relativa
legenda.</p>
<figure id="event_storming">
<img src="report/img/EventStorming.png" />
<figcaption>Event Storming</figcaption>
</figure>
<figure id="legend">
<img src="report/img/event_storming_legend.png" />
<figcaption>Event Storming Legend</figcaption>
</figure>
<h2 id="ubiquitos-language">Ubiquitos Language</h2>
<div class="adjustbox">
<p><span>max width=1.1,center</span></p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Nome</th>
<th style="text-align: left;">Descrizione</th>
<th style="text-align: left;">Sinonimi</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Mano</td>
<td style="text-align: left;">Distribuzione delle 40 carte ai 4
giocatori e la seguente serie di 10 prese</td>
<td style="text-align: left;">Round</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mano</td>
<td style="text-align: left;">Carte dei giocatori non ancora
giocate</td>
<td style="text-align: left;">Hand</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Presa</td>
<td style="text-align: left;">Quando ogni giocatore, a turno, gioca sul
tavolo una carta. L’ultima presa della mano vale 1 punto.</td>
<td style="text-align: left;">Trick</td>
</tr>
<tr class="even">
<td style="text-align: left;">Partita</td>
<td style="text-align: left;">Insieme di più mani fino al raggiungimento
del punteggio di 41 punti.</td>
<td style="text-align: left;">Game</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Partita corta</td>
<td style="text-align: left;">Insieme di più mani fino al raggiungimento
del punteggio di 31 punti.</td>
<td style="text-align: left;">Short Game</td>
</tr>
<tr class="even">
<td style="text-align: left;">Tavolo</td>
<td style="text-align: left;">Raggruppamento di 4 giocatori, suddivisi
in 2 coppie, i giocatori delle stessa squadra “siedono” in direzione
opposta</td>
<td style="text-align: left;">Table</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Seme</td>
<td style="text-align: left;">Tipologia distintiva di carta, ne esistono
4: Denari, Coppe, Spade, Bastoni</td>
<td style="text-align: left;">Suit: Coins, Cups, Swords, Clubs </td>
</tr>
<tr class="even">
<td style="text-align: left;">Briscola</td>
<td style="text-align: left;">Seme con priorita’ piu’ alta.</td>
<td style="text-align: left;">Trump</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Maraffa</td>
<td style="text-align: left;">Se un giocatore possiede le tre carte di
valore maggiore (asso, due e tre, dette assieme "Maraffa" o "Cricca")
del seme di briscola, vince tre punti addizionali. In questo caso deve
scendere con l’asso di quel seme.</td>
<td style="text-align: left;">Cricca, Marafon, Tresette con la
Briscola</td>
</tr>
<tr class="even">
<td style="text-align: left;">Mazzo</td>
<td style="text-align: left;">40 carte, di 4 semi diversi,
1,2,3,4,5,6,7, fante, cavallo e re.</td>
<td style="text-align: left;">Deck</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Taglio</td>
<td style="text-align: left;">Durante una mano in un seme viene giocato
il seme di briscola, che avendo priorita’ maggiore permette di prendere
nonostante il seme di gioco</td>
<td style="text-align: left;">Cut</td>
</tr>
<tr class="even">
<td style="text-align: left;">Busso</td>
<td style="text-align: left;">Invita il compagno, se possibile, a
conquistare la presa e ad aprire il turno successivo con lo stesso
seme</td>
<td style="text-align: left;">Knock</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Striscio corto</td>
<td style="text-align: left;">Quando si ha ancora in mano un basso
numero di carte dello stesso seme con cui si è aperto il turno.</td>
<td style="text-align: left;">Short strip</td>
</tr>
<tr class="even">
<td style="text-align: left;">Striscio lungo</td>
<td style="text-align: left;">Quando si ha ancora in mano molte carte
dello stesso seme con cui si è aperto il turno.</td>
<td style="text-align: left;">Long strip</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Volo</td>
<td style="text-align: left;">Quando non si hanno più carte del seme con
cui si è aperto il turno.</td>
<td style="text-align: left;">Fly</td>
</tr>
<tr class="even">
<td style="text-align: left;">Figura</td>
<td style="text-align: left;">Fante, Cavallo, Re, con punteggio di 1/3
di punto.</td>
<td style="text-align: left;">Figure</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Asso</td>
<td style="text-align: left;">Carta con valore di 1 punto.</td>
<td style="text-align: left;">Ace</td>
</tr>
<tr class="even">
<td style="text-align: left;">Due e Tre</td>
<td style="text-align: left;">Carte con valore 1/3 di punto.</td>
<td style="text-align: left;">Two and Three</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Carta Liscia</td>
<td style="text-align: left;">Carte con numeri 4, 5, 6, 7. Sono prive di
valore</td>
<td style="text-align: left;">Smooth paper</td>
</tr>
<tr class="even">
<td style="text-align: left;">Squadra</td>
<td style="text-align: left;">Coppie di giocatori seduti opposti</td>
<td style="text-align: left;">Team</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Giocatore</td>
<td style="text-align: left;">Persona che interagisce con
l’applicativo</td>
<td style="text-align: left;">Player, User</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chiamata fuori</td>
<td style="text-align: left;">Se un giocatore pensa che la sua squadra
abbia raggiunto i 41 punti (o 31 punti nella variante "corta" della
partita), la squadra può dichiarare di avere già nel mazzo delle prese i
punti per vincere e chiudere in anticipo l’ultima partita. In questo
modo la mano termina immediatamente, senza che vengano giocate le
restanti prese e la squadra che si è "chiamata fuori" impedisce
all’altra squadra di conquistare ulteriori prese. Se una squadra si
chiama fuori e, dopo aver contato i punti delle prese effettuate ed
averli sommati ai punti ottenuti nelle mani già giocate, non raggiunge i
punti per la vittoria (in gergo "sbaglia la chiamata") scatta automatico
l’11 a 0 per la squadra avversaria</td>
<td style="text-align: left;">Call out</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Modalità di gioco</td>
<td style="text-align: left;">regole di gioco classiche o varianti che
influenzano aspetti come il punteggio, condizioni di vittoria/perdita,
... Ne sono state implementate due: classica, 11 a 0.</td>
<td style="text-align: left;">Game mode</td>
</tr>
</tbody>
</table>
</div>
<h2 id="bounded-context">Bounded Context</h2>
<p>Analizzando il dominio di MaraffaOnline, sono stati identificati tre
bounded context. Nella figura si può osservare un primo bounded context,
colorato di azzurro, che modella l’autenticazione dell’utente:</p>
<ul>
<li><p><strong>User:</strong> persona che possiede l’account</p></li>
<li><p><strong>Statistic:</strong> dati dell’utente relativi al gioco
come numero di vittorie, sconfitte, partite giocate e maraffe</p></li>
<li><p><strong>Authentication:</strong> accesso all’applicativo
MaraffaOnline da parte dell’utente</p></li>
</ul>
<p>Il secondo bounded context, colorato di verde, modella la
partita:</p>
<ul>
<li><p><strong>Game:</strong> partita</p></li>
<li><p><strong>Team:</strong> squadra composta da numero di giocatori /
2</p></li>
<li><p><strong>Score:</strong> punteggio delle due squadre</p></li>
<li><p><strong>Statistic:</strong> dati relativi ai game
giocati</p></li>
<li><p><strong>Trick:</strong> presa di quattro carte da parte di un
giocatore</p></li>
<li><p><strong>Round:</strong> 10 prese</p></li>
<li><p><strong>Card:</strong> carta</p></li>
<li><p><strong>Player:</strong> giocatore</p></li>
<li><p><strong>Deck:</strong> mazzo</p></li>
<li><p><strong>Hand:</strong> carte che ha in mano un giocatore</p></li>
</ul>
<p>Infine l’ultimo, di colore arancione, modella la chat:</p>
<ul>
<li><p><strong>Chat:</strong> chat di gioco</p></li>
<li><p><strong>Message:</strong> messaggio inviato nella chat</p></li>
<li><p><strong>User:</strong> persona che invia il messaggio</p></li>
</ul>
<p>È importante notare che il concetto di user/player è polisemico: vi
sono tre rappresentazioni diverse per afferire allo stesso concetto.</p>
<figure id="bounded_context">
<img src="report/img/BoundedCTX.png" />
<figcaption>Context Map</figcaption>
</figure>
<h2 id="requisiti-e-casi-duso">Requisiti e casi d’uso</h2>
<h3 id="requisiti">Requisiti</h3>
<ol>
<li><p>Account</p>
<ol>
<li><p>Login</p></li>
<li><p>Registrazione</p></li>
<li><p>Recupero password</p></li>
<li><p>Visualizzazione profilo</p></li>
<li><p>Modifica password</p></li>
<li><p>Possibilità di scegliere se giocare come ospite o effettuare il
login</p></li>
</ol></li>
<li><p>Realizzazione partita</p>
<ol>
<li><p>Creazione partita</p></li>
<li><p>Partecipazione partita</p></li>
<li><p>gioca carta</p></li>
<li><p>Inizio partita</p></li>
<li><p>Fine mano</p></li>
<li><p>Fine partita</p></li>
</ol></li>
<li><p>Chat di gioco</p>
<ol>
<li><p>chat globale</p></li>
<li><p>chat partita</p></li>
</ol></li>
<li><p>Possibilità di scegliere un compagno di squadra</p></li>
<li><p>Scelta del seme, parole consentite</p></li>
<li><p>Modalità di gioco 11 a 0</p></li>
<li><p>Gestione punteggio</p>
<ol>
<li><p>Calcolo totale e parziale (Gestione per ogni mano) del
punteggio</p></li>
<li><p>Maraffa/Cricca (+3 punti)</p></li>
</ol></li>
<li><p>Servizio gestione utenti</p></li>
<li><p>Salvataggio statistiche</p></li>
<li><p>Realizzazione GUI</p>
<ol>
<li><p>Refactor della GUI esistente</p></li>
<li><p>Rinnovamento GUI</p></li>
</ol></li>
</ol>
<h3 id="casi-duso">Casi d’uso</h3>
<p>Si riporta di seguito lo schema dei casi d’uso che modella
l’interazione dell’utente con l’applicazione.</p>
<figure id="use_case">
<img src="report/img/Casi_duso.png" />
<figcaption>Schema dei casi d’uso</figcaption>
</figure>
<h2 id="pattern-del-ddd">Pattern del DDD</h2>
<p>Per poter mantere le varie parti di software evolvibili assieme al
contesto e l’architettura che utilizza un servizio che "coordina" ed
interroga gli altri e che ha il ruolo di customer si utilizzerà il
<strong>Customer-supplier</strong>, Di seguito, si riportano le
motivazione secondo le quali è stato scelto:</p>
<ul>
<li><p>servizi <strong>loosely coupled</strong></p></li>
<li><p>evoluzione indipendente dei servizi, durante l’aggiornamento del
sistema.</p></li>
<li><p>ove possibile, ogni bounded context è stato sviluppato in un
microservizio separato, ottenendo, così, una distinta separazione della
business logic e delle responsabilità.</p></li>
<li><p>La manutenibilità dei singoli componenti che possono,
ipoteticamente, essere sviluppati da team diversi in modo parallelo,
definendo al meglio i confini del dominio.</p></li>
</ul>
<p>Una pratica del DDD è l’Event Sourcing, tuttavia, in questo progetto
non è stato applicato. Infatti, sebbene possa trarre in inganno il
salvataggio su <em>MongoDB</em> di tutti gli eventi che si verificano
nel contesto di una partita e, di conseguenza, la memorizzazione degli
stati, l’Event Sourcing non è rispettato. Gli stati salvati sono
mutabili e vengono sovrascritti ad ogni cambiamento grazie ai metodi di
aggiornamento, senza salvare ogni singola modifica. Inoltre, sebbene sia
presente un timestamp al momento della creazione del record, non sono
presenti in fase di aggiornamento. Per evitare di aggiungere ulteriore
complessità al progetto, anche in termini di performance relativa alle
interrogazioni articolate per ricostruire lo storico, si è deciso di non
implementare il pattern. Oltre a una semplificata manutenzione, si va
anche a ridurre lo spazio di memorizzazione necessario e, pertanto, in
questa casistica si è ritenuto che un approccio tradizionale fosse più
che sufficiente.</p>
<h2 id="design-generale-del-software">Design generale del software</h2>
<p>L’architettura del software è basata su micro-servizi autonomi e
indipendenti tra loro, la cui comunicazione avviene tramite API REST.
Esiste un middleware che si occupa della gestione e dell’orchestrazione
dei micro-servizi, fungendo da ponte per collegare le varie
tecnologie.</p>
<p>I microservizi sviluppati si occupano di varie aree legate alla
natura del progetto e sono:</p>
<ul>
<li><p><strong>UserService</strong>: si occupa della gestione degli
utenti, quindi la loro registrazione, autenticazione e gestione dei dati
personali.</p></li>
<li><p><strong>BusinessLogic</strong>: si occupa di mantenere al proprio
interno tutte le regole del gioco.</p></li>
<li><p><strong>Front-End</strong>: si occupa di gestire l’interfaccia
grafica e la comunicazione con il middleware.</p></li>
<li><p><strong>Middleware</strong>: si occupa della gestione delle
comunicazioni tra i vari microservizi e svolge la funzione di "motore di
gioco".</p></li>
</ul>
<p><img src="report/img/Architecture.png" style="width:12cm"
alt="image" /><br />
</p>
<h1 id="ch:implementation">Implementation</h1>
<h2 id="componenti">Componenti</h2>
<h3 id="servizi-di-business-logic-e-user-service">Servizi di Business
Logic e User Service</h3>
<p>Entrambi questi servizi sono stati realizzati con lo stack <a
href="http://nestjs.com"><u>NestJS</u></a>, un framework per Node.js che
semplifica la realizzazione di web server e API REST. Si occupano
rispettivamente di gestire la logica di gioco e la gestione degli utenti
che vogliono utilizzare il sistema, due core business del progetto.</p>
<h4 id="business-logic">Business Logic</h4>
<p>Questo servizio mantiene al proprio interno tutte le regole del gioco
e il calcolo dei punteggi. Ha svariati endpoint che permettono al
middleware di avere il minor numero possibile di responsabilità,
delegando al servizio di business logic le operazioni riguardanti il
gioco.</p>
<p>Questa scelta è stata fatta per mantenere il middleware il più
leggero possibile e per evitare che si occupi di operazioni non di sua
competenza. Inoltre, in futuro sarà possibile aggiungere nuovi giochi
modificando il meno possibile il middleware, che dovrà semplicemente
occuparsi della gestione delle partite e comunicare tempestivamente con
i servizi di business logic in base al gioco scelto.</p>
<h4 id="user-service">User Service</h4>
<p>Questo servizio gestisce gli utenti, quindi la loro registrazione,
autenticazione e gestione dei dati personali. Anche in questo caso, il
middleware delega al servizio di gestione degli utenti le operazioni
riguardanti gli utenti, per mantenere il middleware il più leggero
possibile e per evitare che si occupi di operazioni non di sua
competenza. Il core di questo servizio è dato dalla combinazione di
NestJS e TypeORM, che permettono di gestire in modo semplice e veloce la
persistenza dei dati e le operazioni CRUD su un database MySQL. Oltre
alle informazioni degli utenti, il database contiene anche le
informazioni riguardanti le partite giocate e le statistiche personali
di ogni utente del sistema.</p>
<h3 id="front-end">Front-End</h3>
<p>Il front-end è stato realizzato con Angular e si occupa di gestire
l’interfaccia grafica e la comunicazione con il middleware. Il progetto
pilota di questo frontend è un template di una generica app in angular,
questo velocizzato in parte fornendo una struttura e alcune best
practice di angular di cui non si era a conoscenza. Sono state
realizzate diverse pagine, tra cui la home page, la pagina di
registrazione, la pagina di login, la pagina di gioco e la pagina di
profilo utente. Utilizza API REST per comunicare con il middleware e
ottenere i dati necessari per il funzionamento del gioco, mentre
utilizza WebSockets per la comunicazione in tempo reale con il
middleware.</p>
<h3 id="middleware">Middleware</h3>
<p><img src="report/img/middleware.png" style="width:12cm"
alt="image" /><br />
Come già citato, il <strong>middleware è il cuore del sistema</strong>.
L’architettura utilizzata per la gestione delle partite è quella di un
<strong>multi-agente</strong>, in cui ogni agente si occupa di gestire
una partita e di orchestrare la comunicazione con gli altri servizi,
come ad esempio il front-end. Questo core è stato realizzato con
<strong>Vertx</strong>, che è stato utilizzato anche per creare un
web-server in Java.</p>
<p>Inoltre, al middleware è collegato un database NoSQL su MongoDB, che
viene aggiornato a ogni trick completato dai giocatori per creare uno
storico delle partite e salvare le loro decisioni in gioco. Questa
raccolta di dati sarà parte di uno sviluppo futuro, in cui, dopo aver
raccolto una grande quantità di dati di partite, si potrà tentare di
creare un modello di machine learning per sviluppare un’intelligenza
artificiale che possa giocare al posto di un giocatore umano.</p>
<h2 id="tecnologie">Tecnologie</h2>
<h3 id="swagger---openapi">Swagger - OpenAPI</h3>
<p>Uno dei requisiti fondamentali di questo progetto è stata la
documentazione delle API. Per fare ciò è stato utilizzato Swagger, un
framework open-source che permette di descrivere, produrre e consumare
servizi web RESTful. Swagger permette di testare le API direttamente
dalla documentazione, grazie a un’interfaccia grafica che consente di
inviare richieste e visualizzare le risposte.</p>
<p>Per i servizi creati in Node.js è stata utilizzata una libreria ad
hoc, in grado di generare la documentazione automaticamente tramite i
corretti decoratori. Al contrario, per i servizi in Java non esiste
alcuna libreria in grado di generare automaticamente la documentazione
API a partire dai metodi esposti, quindi è stata creata manualmente.
Grazie a un lavoro preliminare open-source svolto da <a
href="https://github.com/anupsaund"><u>Anup Saund</u></a> sulla sua
repository <a
href="https://github.com/anupsaund/vertx-auto-swagger"><u>Vertx auto
swagger</u></a>, è stato possibile creare automaticamente un file HTML
contenente la documentazione delle API esposte dai servizi in Java.
Purtroppo, questo file non era in grado di aggiornarsi automaticamente
in caso di modifiche alle rotte, quindi è stato necessario adattarlo per
renderlo più flessibile e adatto al nostro progetto.</p>
<p>Vertx è una libreria davvero completa e ben strutturata. È stato
possibile creare un Router in grado di gestire tutte le rotte del
progetto in Java utilizzando una semplice classe astratta che ha
definito tutti i metodi utilizzati nel progetto, tramite la quale si è
potuto razionalizzare il codice e creare dinamicamente la funzionalità
richiesta.</p>
<div class="sourceCode" id="list:java_swagger_interface"
data-language="Java"
data-caption="Semplice interfaccia per le rotte HTTP"
label="list:java_swagger_interface"><pre
class="sourceCode java"><code class="sourceCode java"><span id="list:java_swagger_interface-1"><a href="#list:java_swagger_interface-1" aria-hidden="true" tabindex="-1"></a><span class="kw">package</span><span class="im"> httpRest</span><span class="op">;</span></span>
<span id="list:java_swagger_interface-2"><a href="#list:java_swagger_interface-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:java_swagger_interface-3"><a href="#list:java_swagger_interface-3" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">io</span><span class="op">.</span><span class="im">vertx</span><span class="op">.</span><span class="im">core</span><span class="op">.</span><span class="im">Handler</span><span class="op">;</span></span>
<span id="list:java_swagger_interface-4"><a href="#list:java_swagger_interface-4" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">io</span><span class="op">.</span><span class="im">vertx</span><span class="op">.</span><span class="im">core</span><span class="op">.</span><span class="im">http</span><span class="op">.</span><span class="im">HttpMethod</span><span class="op">;</span></span>
<span id="list:java_swagger_interface-5"><a href="#list:java_swagger_interface-5" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">io</span><span class="op">.</span><span class="im">vertx</span><span class="op">.</span><span class="im">ext</span><span class="op">.</span><span class="im">web</span><span class="op">.</span><span class="im">RoutingContext</span><span class="op">;</span></span>
<span id="list:java_swagger_interface-6"><a href="#list:java_swagger_interface-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:java_swagger_interface-7"><a href="#list:java_swagger_interface-7" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="kw">interface</span> IRouteResponse <span class="op">{</span></span>
<span id="list:java_swagger_interface-8"><a href="#list:java_swagger_interface-8" aria-hidden="true" tabindex="-1"></a>    HttpMethod <span class="fu">getMethod</span><span class="op">();</span></span>
<span id="list:java_swagger_interface-9"><a href="#list:java_swagger_interface-9" aria-hidden="true" tabindex="-1"></a>    <span class="bu">String</span> <span class="fu">getRoute</span><span class="op">();</span></span>
<span id="list:java_swagger_interface-10"><a href="#list:java_swagger_interface-10" aria-hidden="true" tabindex="-1"></a>    <span class="bu">Handler</span><span class="op">&lt;</span>RoutingContext<span class="op">&gt;</span> <span class="fu">getHandler</span><span class="op">();</span></span>
<span id="list:java_swagger_interface-11"><a href="#list:java_swagger_interface-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>La parte realmente complicata è stata fare in modo che le annotazioni
presenti nel codice sorgente venissero lette e trasformate in un file
JSON che rappresentasse correttamente la documentazione delle API. Dopo
alcuni tentativi, è stato possibile automatizzare anche questa
operazione.</p>
<div class="sourceCode" id="list:java_swagger_modules"
data-language="Java"
data-caption="Aggiunta dei moduli delle classi contenenti rotte HTTP"
label="list:java_swagger_modules"><pre
class="sourceCode java"><code class="sourceCode java"><span id="list:java_swagger_modules-1"><a href="#list:java_swagger_modules-1" aria-hidden="true" tabindex="-1"></a><span class="dt">final</span> ImmutableSet<span class="op">&lt;</span>ClassPath<span class="op">.</span><span class="fu">ClassInfo</span><span class="op">&gt;</span> modelClasses <span class="op">=</span> ImmutableSet<span class="op">.&lt;</span>ClassPath<span class="op">.</span><span class="fu">ClassInfo</span><span class="op">&gt;</span><span class="fu">builder</span><span class="op">()</span></span>
<span id="list:java_swagger_modules-2"><a href="#list:java_swagger_modules-2" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">addAll</span><span class="op">(</span><span class="kw">this</span><span class="op">.</span><span class="fu">getClassesInPackage</span><span class="op">(</span><span class="st">&quot;game&quot;</span><span class="op">))</span></span>
<span id="list:java_swagger_modules-3"><a href="#list:java_swagger_modules-3" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">addAll</span><span class="op">(</span><span class="kw">this</span><span class="op">.</span><span class="fu">getClassesInPackage</span><span class="op">(</span><span class="st">&quot;userModule&quot;</span><span class="op">))</span></span>
<span id="list:java_swagger_modules-4"><a href="#list:java_swagger_modules-4" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">addAll</span><span class="op">(</span><span class="kw">this</span><span class="op">.</span><span class="fu">getClassesInPackage</span><span class="op">(</span><span class="st">&quot;BLManagement&quot;</span><span class="op">))</span></span>
<span id="list:java_swagger_modules-5"><a href="#list:java_swagger_modules-5" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">addAll</span><span class="op">(</span><span class="kw">this</span><span class="op">.</span><span class="fu">getClassesInPackage</span><span class="op">(</span><span class="st">&quot;chatModule&quot;</span><span class="op">))</span></span>
<span id="list:java_swagger_modules-6"><a href="#list:java_swagger_modules-6" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">build</span><span class="op">();</span></span></code></pre></div>
<p>Java permette di creare oggetti molto complessi, diversi dai JSON /
object solitamente utilizzati in JavaScript. Era fondamentale poter
adoperare questi schemi per avere una documentazione ricca e per poter
testare velocemente le API senza utilizzare necessariamente un client
come Postman.</p>
<p>Infine, per poter mostrare correttamente la documentazione, è stato
necessario creare un file HTML che permettesse di visualizzare la
documentazione in modo chiaro e ordinato. Questo file statico, presente
nella repository del progetto, utilizza come fonte il file JSON di
OpenAPI che viene rigenerato a ogni build del progetto, in modo da avere
sempre la documentazione aggiornata.</p>
<h3 id="postman">Postman</h3>
<p>Swagger ha semplificato lo sviluppo delle API e il loro
funzionamento, ma non è sostenibile per testare chiamate API successive
che seguono un certo ordine o che necessitano di payload specifici.
Postman è stato fondamentale per risolvere questo problema.</p>
<p>È stata creata una raccolta di richieste, comodamente esportate da
Swagger senza alcun bisogno di riscrittura. Queste possono contenere
payload parametrizzati grazie alle variabili di ambiente settabili una
volta per tutte, come ad esempio il GameID, che altrimenti, una volta
creato, deve essere copiato e incollato in ogni richiesta successiva che
lo richiede.</p>
<p>L’altro grande vantaggio di utilizzare Postman è stata la
funzionalità Flows, che permette di creare un diagramma di flusso delle
richieste e di salvare alcune risposte in variabili. Fino a quando non
si è arrivati ad avere un frontend funzionante, questi Flows sono stati
utili per trovare eventuali bug e avere ben chiaro il flusso di chiamate
che sarebbero dovute essere implementate nel frontend, il che ha
velocizzato lo sviluppo del frontend, seppur in minima parte.</p>
<p>E’ stato realizzato un flow che simulasse la creazione di una
partita, l’iscrizione di 4 giocatori, l’avvio della partita e la
simulazione di un turno completo di gioco. Questo ha permesso di testare
in modo spedito molte delle funzionalità del sistema, e di trovare
eventuali bug in modo altrettanto rapido.</p>
<p><img src="report/img/postManFlow.png" style="width:18cm;height:10cm"
alt="image" /><br />
</p>
<h3 id="log-automatici">Log automatici</h3>
<p>Il servizio core del sistema è il middleware e per poterlo monitorare
è stato necessario implementare un sistema di log automatici. Tenere
traccia di tutte le operazioni è un compito molto complesso e avrebbe
reso difficile un eventuale debug su un software in produzione che in
caso di errore potrebbe riavviarsi e perdere definitivamente
quell’errore. Grazie a Vertx, che offre "gratuitamente" un logger, e
alla libreria <a
href="https://mvnrepository.com/artifact/ch.qos.logback/logback-classic"><u>LogBack</u></a>,
i log legati alle funzionalità più importanti sono trascritti su file
.log in modo da poterli analizzare in caso di problemi.</p>
<p>Questo sistema poi si è evoluto grazie a una configurazione di
LogBack in un file XML, tramite il quale è possibile personalizzare
completamente il sistema di log, decidendo quali package loggare, in
quali file trascriverli, scegliere il livello di log (info, debug,
error, ecc.) e attuare un sistema di log rotate. Secondo questa
configurazione, i log oltre una certa dimensione vengono compressi e
rinominati per non occupare troppo spazio, e si può anche impostare il
numero di questi file compressi da mantenere.</p>
<div class="sourceCode" id="list:xml_logback" data-language="Xml"
data-caption="File configurazione Log automatici"
label="list:xml_logback"><pre class="sourceCode Xml"><code class="sourceCode xml"><span id="list:xml_logback-1"><a href="#list:xml_logback-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">appender</span><span class="ot"> name=</span><span class="st">&quot;DEBUG_LOG&quot;</span><span class="ot"> class=</span><span class="st">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span>&gt;</span>
<span id="list:xml_logback-2"><a href="#list:xml_logback-2" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">file</span>&gt;${DEBUG_FILE}&lt;/<span class="kw">file</span>&gt;</span>
<span id="list:xml_logback-3"><a href="#list:xml_logback-3" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">rollingPolicy</span><span class="ot"> class=</span><span class="st">&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;</span>&gt;</span>
<span id="list:xml_logback-4"><a href="#list:xml_logback-4" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">fileNamePattern</span>&gt;${DEBUG_FILE}.%d{yyyy-MM-dd}.%i.gz&lt;/<span class="kw">fileNamePattern</span>&gt;</span>
<span id="list:xml_logback-5"><a href="#list:xml_logback-5" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">maxFileSize</span>&gt;900MB&lt;/<span class="kw">maxFileSize</span>&gt;</span>
<span id="list:xml_logback-6"><a href="#list:xml_logback-6" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">maxHistory</span>&gt;14&lt;/<span class="kw">maxHistory</span>&gt;</span>
<span id="list:xml_logback-7"><a href="#list:xml_logback-7" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">totalSizeCap</span>&gt;2GB&lt;/<span class="kw">totalSizeCap</span>&gt;</span>
<span id="list:xml_logback-8"><a href="#list:xml_logback-8" aria-hidden="true" tabindex="-1"></a>        &lt;/<span class="kw">rollingPolicy</span>&gt;</span>
<span id="list:xml_logback-9"><a href="#list:xml_logback-9" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">encoder</span>&gt;</span>
<span id="list:xml_logback-10"><a href="#list:xml_logback-10" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">pattern</span>&gt;${LOG_PATTERN}&lt;/<span class="kw">pattern</span>&gt;</span>
<span id="list:xml_logback-11"><a href="#list:xml_logback-11" aria-hidden="true" tabindex="-1"></a>        &lt;/<span class="kw">encoder</span>&gt;</span>
<span id="list:xml_logback-12"><a href="#list:xml_logback-12" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">appender</span>&gt;</span>
<span id="list:xml_logback-13"><a href="#list:xml_logback-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:xml_logback-14"><a href="#list:xml_logback-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:xml_logback-15"><a href="#list:xml_logback-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">&lt;!-- Il package game usera la configurazione del log di debug --&gt;</span></span>
<span id="list:xml_logback-16"><a href="#list:xml_logback-16" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">logger</span><span class="ot"> level=</span><span class="st">&quot;INFO&quot;</span><span class="ot"> name=</span><span class="st">&quot;game&quot;</span><span class="ot"> additivity=</span><span class="st">&quot;false&quot;</span>&gt;</span>
<span id="list:xml_logback-17"><a href="#list:xml_logback-17" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">appender-ref</span><span class="ot"> ref=</span><span class="st">&quot;DEBUG_LOG_ASYNC&quot;</span>/&gt;</span>
<span id="list:xml_logback-18"><a href="#list:xml_logback-18" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">logger</span>&gt;</span></code></pre></div>
<p>Questo sistema si adatta perfettamente a un software dockerizzabile
che ha montato un volume relativo alla cartella /log, che può anche
essere un volume remoto, da cui è possibile consultare velocemente i log
in caso di problemi.</p>
<div class="sourceCode" id="list:dockerfile_log" data-language="Python"
data-caption="Volume di log nel dockerfile l.13 da montare successivamente"
label="list:dockerfile_log"><pre class="sourceCode python"><code class="sourceCode python"><span id="list:dockerfile_log-1"><a href="#list:dockerfile_log-1" aria-hidden="true" tabindex="-1"></a>FROM gradle:<span class="fl">8.6.0</span><span class="op">-</span>jdk17 AS build</span>
<span id="list:dockerfile_log-2"><a href="#list:dockerfile_log-2" aria-hidden="true" tabindex="-1"></a>COPY <span class="op">--</span>chown<span class="op">=</span>gradle:gradle . <span class="op">/</span>home<span class="op">/</span>gradle<span class="op">/</span>src</span>
<span id="list:dockerfile_log-3"><a href="#list:dockerfile_log-3" aria-hidden="true" tabindex="-1"></a>WORKDIR <span class="op">/</span>home<span class="op">/</span>gradle<span class="op">/</span>src</span>
<span id="list:dockerfile_log-4"><a href="#list:dockerfile_log-4" aria-hidden="true" tabindex="-1"></a>RUN gradle assemble</span>
<span id="list:dockerfile_log-5"><a href="#list:dockerfile_log-5" aria-hidden="true" tabindex="-1"></a>RUN gradle fatJar </span>
<span id="list:dockerfile_log-6"><a href="#list:dockerfile_log-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:dockerfile_log-7"><a href="#list:dockerfile_log-7" aria-hidden="true" tabindex="-1"></a>FROM openjdk:<span class="dv">19</span></span>
<span id="list:dockerfile_log-8"><a href="#list:dockerfile_log-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:dockerfile_log-9"><a href="#list:dockerfile_log-9" aria-hidden="true" tabindex="-1"></a>RUN mkdir <span class="op">/</span>app</span>
<span id="list:dockerfile_log-10"><a href="#list:dockerfile_log-10" aria-hidden="true" tabindex="-1"></a>RUN mkdir <span class="op">/</span>app<span class="op">/</span>log</span>
<span id="list:dockerfile_log-11"><a href="#list:dockerfile_log-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:dockerfile_log-12"><a href="#list:dockerfile_log-12" aria-hidden="true" tabindex="-1"></a>COPY <span class="op">--</span><span class="im">from</span><span class="op">=</span>build <span class="op">/</span>home<span class="op">/</span>gradle<span class="op">/</span>src<span class="op">/</span>app<span class="op">/</span>build<span class="op">/</span>libs<span class="op">/</span> <span class="op">/</span>app<span class="op">/</span></span>
<span id="list:dockerfile_log-13"><a href="#list:dockerfile_log-13" aria-hidden="true" tabindex="-1"></a>COPY <span class="op">--</span><span class="im">from</span><span class="op">=</span>build <span class="op">/</span>home<span class="op">/</span>gradle<span class="op">/</span>src<span class="op">/</span>app<span class="op">/</span>log <span class="op">/</span>app<span class="op">/</span>log</span>
<span id="list:dockerfile_log-14"><a href="#list:dockerfile_log-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:dockerfile_log-15"><a href="#list:dockerfile_log-15" aria-hidden="true" tabindex="-1"></a>EXPOSE <span class="dv">3003</span></span>
<span id="list:dockerfile_log-16"><a href="#list:dockerfile_log-16" aria-hidden="true" tabindex="-1"></a>ENTRYPOINT [<span class="st">&quot;java&quot;</span>,<span class="st">&quot;-jar&quot;</span>,<span class="st">&quot;/app/Middleware.jar&quot;</span>]</span></code></pre></div>
<h3 id="lettura-variabili-dambiente">Lettura variabili d’ambiente</h3>
<p>Data la scelta di dockerizzare interamente i servizi, è stato
necessario l’utilizzo di variabili d’ambiente. Questo ha permesso di
creare un sistema di deploy molto flessibile, in cui è possibile
cambiare l’indirizzo del servizio a cui connettersi semplicemente
modificando il file di configurazione del Docker Compose. I servizi in
NodeJS leggono il contenuto delle variabili d’ambiente tramite il modulo
‘process.env‘, mentre i servizi in Java utilizzano ‘System.getenv‘.
Questi comportamenti sono corretti per lo sviluppo locale e per ambienti
di produzione in cui le variabili d’ambiente sono settate
correttamente.</p>
<p>Per quanto riguarda invece lo sviluppo in CI, è stato necessario
creare un file ‘.env.example‘ che contenesse tutte le variabili
d’ambiente necessarie al funzionamento del servizio, in modo da poterle
settare correttamente nel CI/CD, soprattutto per la fase di testing, e
metterlo sulla repository. È importante tenere a mente che non
dovrebbero mai essere caricati dati sensibili su strumenti di controllo
di versione. In questo caso, non ci sono database o account cloud
eventualmente raggiungibili dall’esterno.</p>
<h1 id="ch:DevOps">DevOps</h1>
<h2 id="semantic-versioning-changelog-e-secrets">Semantic Versioning,
changelog e secrets</h2>
<h3 id="semantic-versioning">Semantic Versioning</h3>
<p>Per ogni release è stato adottato il semanting Versioning. È stato
utilizzato il formato X.Y.Z, partendo da 1.0.0, ogni release incrementa
il numero di versione in base a:</p>
<ul>
<li><p><strong>Major (X):</strong> per cambiamenti incompatibili con le
versioni precedenti</p></li>
<li><p><strong>Minor (Y):</strong> per aggiunta di nuove funzionalità
compatibili con le versioni precedenti</p></li>
<li><p><strong>Patch (Z):</strong> per correzione di bug compatibili con
le versioni precedenti</p></li>
</ul>
<p>Per ogni release viene creato anche un tag con la corrispondente
versione.</p>
<h3 id="changelog-e-secrets">Changelog e secrets</h3>
<p>Ogni volta che is effettua una push sul main, viene generato un
changelog. Il changelog è un file che contiene tutte le modifiche
effettuate. Nel changelog vengono riportati ogni commit che indicano le
modifiche apportate, i contributori e il codice sorgente. Se presenti,
vengono inoltre riportate le sezioni analoghe a quelle dei conventional
commit (feat per nuove funzionalità, ci per la continuous integration,
refactor, docs per la documentazione, ecc.). Il changelog viene
autogenerato tramite l’action ’BobAnkh/auto-generate-changelog@v1.2.5’.
Inoltre, per evitare un accesso non autorizzato a dati sensibili, come
l’access token del changelog, sono stati inseriti in secrets, variabili
d’ambiente di Github.</p>
<h2 id="licensing-e-issue-template">Licensing e issue template</h2>
<p>In ogni nostra repo è presente una licenza MIT. È stata scelta questa
licenza perché è estremamente permissiva: il codice sorgente di Maraffa
Online è open source e pertanto gli utenti possono utilizzarlo,
modificarlo e distribuirlo. Inoltre la licenza MIT è compatibile anche
con altre licenze, anche con quelle restrittive come GPL. È incoraggiata
la collaborazione anche grazie alla presenza di un template con il quale
un utente può consigliare nuove feature, segnalare un bug o suggerire
un’implementazione alternativa.</p>
<h2 id="dvcs">DVCS</h2>
<p>Come strumento di controllo di versione è stato scelto git, sono
state adottate le seguenti best practices o git policy per garantire un
flusso di lavoro coerente e prevenire conflitti di merge.</p>
<h3 id="struttura-dei-branch">Struttura dei Branch</h3>
<p>Una delle componenti principali della Git Policy è la gestione dei
branch. La struttura tipica prevede almeno tre tipi di branch:</p>
<ul>
<li><p><strong>Master/Main:</strong> Questo è il branch principale che
contiene il codice di produzione. Ogni commit su questo branch dovrebbe
essere stabile e pronto per il rilascio. Questo branch e stato protetto
per evitare commit diretti, richiedendo quindi una revisione per ogni
operazione di merge.</p></li>
<li><p><strong>Develop:</strong> Qui viene integrato il lavoro di
sviluppo corrente. È il branch dove confluiscono le feature prima di
essere preparate per il rilascio. Questo branch dovrebbe essere
costantemente aggiornato e testato per assicurare che sia in uno stato
pronto per la produzione.</p></li>
<li><p><strong>Feature Branches:</strong> Utilizzati per lo sviluppo di
nuove funzionalità. Ogni feature branch deve derivare da ‘develop‘ e,
una volta completata la feature, viene reintegrato in ‘develop‘ tramite
una pull request.</p></li>
</ul>
<h3 id="struttura-delle-repository">Struttura delle repository</h3>
<p>Data la natura del sistema, sono state necessarie numerose repository
Git per evitare confusione, separare correttamente i componenti e
poterli rilasciare indipendentemente. Il sistema, tuttavia, è comunque
utilizzabile e rintracciabile attraverso la repository GitLab di ateneo
PikaLab, poiché è stata implementata una repository con submodules che
le contiene. Inoltre, in questa repository si può trovare il
docker-compose per il deploy del sistema completo e sempre aggiornato,
assieme ad alcuni file statici per il suo funzionamento e
configurazione.</p>
<h3 id="pull-request-e-code-review">Pull Request e Code Review</h3>
<p>Le pull request (PR) sono essenziali per garantire la qualità del
codice. Ogni PR è stata sottoposta a una code review da parte di uno o
più membri del team. Questo processo non solo aiuta a individuare errori
e problemi di design, ma promuove anche la condivisione delle conoscenze
e facilita, tramite la comparazione di codice, la spiegazione di nuove
funzionalità introdotte entro la fine dello sprint.</p>
<h3 id="gestione-dei-conflitti">Gestione dei Conflitti</h3>
<p>I conflitti di merge sono inevitabili in un ambiente di sviluppo
collaborativo soprattutto quando è difficile modulare le parti di un SW.
La scelta tra merge e rebase è stata fatta in base al contesto e alla
complessità delle modifiche, privilegiando la chiarezza della storia del
codice seppur a discapito della linearità, quindi di utilizzare il merge
per mantenere una storia del codice più pulita e continua. Questo è
particolarmente utile per tracciare l’evoluzione del progetto e per
individuare facilmente l’origine dei bug. Infatti con il rebase c’è il
rischio che venga cancellata una parte della history. In alcuni casi,
può risultare molto pericoloso e può introdurre rischi significativi se
non utilizzato con estrema cautela: ipotizzando di introdurre un bug e
successivamente di eseguire il rebase che cancella dalla history la
modifica che ha introdotto il bug, risulterebbe particolarmente ostico
tracciare le modifiche e risalire a questo cambiamento. Potenzialmente
può creare anche confusione tra i membri del team. Per lo stesso motivo,
non è mati stato utilizzato il merge con squash commit che di fatto
avrebbe modificato la cronologia dei commit e reso difficile tracciare
le modifiche originarie.</p>
<h3 id="commit-verification">Commit verification</h3>
<p>È stato utilizzato il meccanismo di commit verification per
assicurare:</p>
<ul>
<li><p><strong>Integrità:</strong> controllo sull’alterazione dei file
presenti all’interno del commit. Utilizzando una funzione hash, ci si
assicura che non siano stati alterati in non modo autorizzato.</p></li>
<li><p><strong>Autenticità:</strong> controllo sull’autore del commit.
Utilizzando una firma digitale, ci si assicura che il commit sia stato
effettuato dall’autore autorizzato.</p></li>
</ul>
<p>I controlli vengono effettuati in seguito a un merge.<br />
Quando un commit è verificato viene prodotto un tag verde con la scritta
"verified" e un tag rosso con la scritta "unverified" in caso
contrario:</p>
<figure id="verified_commit">
<img src="report/img/verified_commit.png" />
<figcaption>Verified commit</figcaption>
</figure>
<h3 id="conventional-commits">Conventional commits</h3>
<p>La pratica adottata per i commit è stata quella di effettuare commit
frequenti e significativi.</p>
<p>In ogni repo è stato adottato un sistema standard per scrivere i
commit: i conventional commit. In questo modo i commit risultano più
chiari e facilmente leggibili. Riportiamo di seguito la nomenclatura
usata:</p>
<ul>
<li><p><strong>fix:</strong> per i commit che risolvono un bug</p></li>
<li><p><strong>feat:</strong> per i commit che aggiungono una nuova
feature</p></li>
<li><p><strong>refactor:</strong> per i commit che migliorano il codice
senza aggiungere nuove funzionalità</p></li>
<li><p><strong>docs:</strong> per i commit che riguardano la
documentazione</p></li>
<li><p><strong>style:</strong> per i commit che riguardano la
formattazione del codice</p></li>
<li><p><strong>test:</strong> per i commit che riguardano i
test</p></li>
<li><p><strong>ci:</strong> per i commit che riguardano la Continuous
Integration</p></li>
</ul>
<p>Inoltre sono evidenziati i breaking changes per le modifiche non più
compatibili con le versioni precedenti. La stessa nomenclatura viene
utilizzata anche nel changelog.</p>
<h2 id="git-hooks">Git Hooks:</h2>
<p>Affinchè i commit siano ben strutturati e, quindi, ci sia una
maggiore chiarezza anche nel changelog, è stato implementato un git
hook. Gli hook sono script che vengono eseguiti automaticamente in
determinati punti del flusso di lavoro di Git. In questo caso, l’hook
viene eseguito subito dopo aver eseguito un commit. Se il messaggio di
commit non rispetta lo standard utilizzato nel progetto, il commit viene
annullato e viene visualizzato un messaggio di errore:</p>
<figure id="commit_hook">
<img src="report/img/not_valid_msg_hook.png" />
<figcaption>Message commit non valido</figcaption>
</figure>
<p>Altrimenti il commit viene effettuato correttamente e verrà riportato
"Il formato del messaggio di commit è valido":</p>
<figure id="commit_hook_valid">
<img src="report/img/commit_msg_hook.png" />
<figcaption>Message commit valido</figcaption>
</figure>
<h2 id="build-automation">Build automation</h2>
<p>Abbiamo deciso di implementare ogni servizio in una repository
diversa. La repository fornita è un contenitore di tutte le singole
repository dei servizi. Per ogni repository è stata implementata una
build automation specifica.<br />
In questo modo si riesce a automatizzare i processi di build, test e
deploy, ottenendo diversi vantaggi:</p>
<ul>
<li><p>si riduce drasticamente il tempo per la compilazione del
codice</p></li>
<li><p>ogni volta i passaggi verranno eseguiti allo stesso modo
ottenendo, quindi, riproducibilità</p></li>
<li><p>si identificano facilmente i problemi grazie al sistema di stampe
a video che si ottiene durante l’esecuzione delle GitHub
Actions</p></li>
<li><p>minimizzazione degli errori umani</p></li>
<li><p>garantisce il continuous deployment</p></li>
</ul>
<h3 id="scheletro-del-workflow">Scheletro del workflow</h3>
<p>I workflow utilizzati in questo progetto, pur utilizzando actions
diverse specifiche per ogni servizio e linguaggio, seguono uno schema
comune che ne facilita lo sviluppo e la manutenzione.</p>
<p>Ogni workflow di deployment è composto da tre job principali: build,
test e deploy. Seguono una logica sequenziale e non parallela, in cui la
fine di ogni job decreta l’inizio di quello successivo. Il collegamento
tra i job è garantito da un sistema di cache, che permette di passare i
dati tra i vari job migliorandone l’efficienza e la velocità. Questi job
vengono attivati secondo alcune regole di progetto comuni alle
repository, in linea con il workflow adottato. Questi ultimi non sono
attivati ad ogni commit, ma solo in determinate circostanze, qui di
seguito elencate:</p>
<ul>
<li><p><strong>Pull request su develop</strong></p></li>
<li><p><strong>Release manuale su main pubblicata</strong></p></li>
</ul>
<p>La struttura dei workflow è stata progettata per essere il più
modulare possibile. Sono state utilizzate variabili d’ambiente per
differenziare il deploy su develop e main, in modo da poter riutilizzare
lo stesso workflow per entrambi i branch e produrre diverse immagini del
software. Il nome dell’immagine pubblicata viene creato in modo
parametrico, utilizzando il nome della repository, modificando i
caratteri in minuscolo e aggiungendo la versione del software, che viene
presa dal tag della release o impostata su stage o develop a seconda del
branch che ha attivato il workflow.</p>
<h3 id="usermanagement-e-businesslogic">UserManagement e
BusinessLogic</h3>
<p>Essendo le due repository estremamente simili e avendo entrambe un
ambiente in Node.js, è stato implementato un workflow pressoché analogo.
Le actions utilizzate sono quelle di Yarn per le varie fasi di build,
test e deploy, e per la creazione della cache tra i vari job.</p>
<h3 id="middleware-1">Middleware</h3>
<p>Questa repository è stata implementata in Java, quindi il workflow è
stato leggermente diverso. Per le varie fasi sono state utilizzate le
action di Java e Gradle. Per il corretto funzionamento della action di
setup e quindi delle successive, si è reso necessario, anche se non
previsto e non consigliato, mantenere sul repository remoto il file
‘gradle-wrapper.jar‘. Per la fase di test, invece, è stata utilizzata
un’action che permette di creare un container con un database di
MongoDB, in modo da poter testare il codice che interagisce con un
database, il che compone una delle funzionalità principali del servizio.
Anche in questo caso, password e username vengono passati tramite i
secrets.</p>
<h3 id="frontend">Frontend</h3>
<p>La repository di frontend è stata implementata in Angular, quindi il
workflow è stato leggermente diverso. Per le varie fasi sono state
utilizzate le action di Yarn per le fasi di build, deploy e per la
creazione della cache tra i vari job. Non è stato necessario utilizzare
la fase di test, poiché il frontend di un’applicazione non ha un sistema
di unit test; la comunicazione con il middleware viene testata
"manualmente".</p>
<h2 id="continuous-integration">Continuous Integration</h2>
<p>Per migliorare la qualità del software e velocizzare il processo di
sviluppo, è stata implementata la Continuous Integration. Questa pratica
permette di integrare il codice frequentemente, evitando possibili
rischi d’integrazione e consetendo l’esecuzione di test automatici.
Grazie al sistema di notifiche, inoltre, è possibile ricevere feedback
immediato sullo stato delle Github Actions, per accertarsi che sia
sempre tutto funzionante e non siano stati introdotti bug. Mantenendo il
sistema continuamente monitorato, si migliora anche l’effiicienza e la
collaborazione tra i membri del team.</p>
<h2 id="automated-quality-assurance">Automated quality assurance</h2>
<h3 id="testing">Testing</h3>
<p>Per ogni servizio in questo sistema è stato adottato, ove possibile,
il paradigma di programmazione TDD, cioè Test Driven Development. Questo
approccio prevede che i test siano scritti prima del codice, in modo da
guidare lo sviluppo e garantire che il codice prodotto soddisfi i
requisiti specificati. All’interno della CI, la fase di test è stata
implementata con Jest per quanto riguarda i servizi che usano Node.js,
generando di fatto un report abbastanza comprensibile direttamente nella
finestra della CI. Il componente middleware, scritto in Java, invece,
generava risultati di test non così chiari. Per modificare questo
comportamento, è stata introdotta una dipendenza nel build Gradle che
permette di avere un report più dettagliato e comprensibile. La libreria
<a
href="https://plugins.gradle.org/plugin/com.adarshr.test-logger"><u>Test
Logger</u></a>, tramite una piccola configurazione nel file build.gradle
come qui riportata, ha soddisfatto le nostre esigenze.</p>
<div class="sourceCode" id="list:gradle_testlogger" data-language="Java"
data-caption="Test logger" label="list:gradle_testlogger"><pre
class="sourceCode java"><code class="sourceCode java"><span id="list:gradle_testlogger-1"><a href="#list:gradle_testlogger-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">com</span><span class="op">.</span><span class="im">adarshr</span><span class="op">.</span><span class="im">gradle</span><span class="op">.</span><span class="im">testlogger</span><span class="op">.</span><span class="im">TestLoggerExtension</span></span>
<span id="list:gradle_testlogger-2"><a href="#list:gradle_testlogger-2" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">com</span><span class="op">.</span><span class="im">adarshr</span><span class="op">.</span><span class="im">gradle</span><span class="op">.</span><span class="im">testlogger</span><span class="op">.</span><span class="im">TestLoggerPlugin</span></span>
<span id="list:gradle_testlogger-3"><a href="#list:gradle_testlogger-3" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">com</span><span class="op">.</span><span class="im">adarshr</span><span class="op">.</span><span class="im">gradle</span><span class="op">.</span><span class="im">testlogger</span><span class="op">.</span><span class="im">theme</span><span class="op">.</span><span class="im">ThemeType</span></span>
<span id="list:gradle_testlogger-4"><a href="#list:gradle_testlogger-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:gradle_testlogger-5"><a href="#list:gradle_testlogger-5" aria-hidden="true" tabindex="-1"></a>testlogger <span class="op">{</span></span>
<span id="list:gradle_testlogger-6"><a href="#list:gradle_testlogger-6" aria-hidden="true" tabindex="-1"></a>    theme <span class="op">=</span> ThemeType<span class="op">.</span><span class="fu">MOCHA</span></span>
<span id="list:gradle_testlogger-7"><a href="#list:gradle_testlogger-7" aria-hidden="true" tabindex="-1"></a>    showExceptions <span class="op">=</span> <span class="kw">true</span></span>
<span id="list:gradle_testlogger-8"><a href="#list:gradle_testlogger-8" aria-hidden="true" tabindex="-1"></a>    showStackTraces <span class="op">=</span> <span class="kw">true</span></span>
<span id="list:gradle_testlogger-9"><a href="#list:gradle_testlogger-9" aria-hidden="true" tabindex="-1"></a>    showFullStackTraces <span class="op">=</span> <span class="kw">false</span></span>
<span id="list:gradle_testlogger-10"><a href="#list:gradle_testlogger-10" aria-hidden="true" tabindex="-1"></a>    showCauses <span class="op">=</span> <span class="kw">true</span></span>
<span id="list:gradle_testlogger-11"><a href="#list:gradle_testlogger-11" aria-hidden="true" tabindex="-1"></a>    slowThreshold <span class="op">=</span> <span class="dv">2000</span></span>
<span id="list:gradle_testlogger-12"><a href="#list:gradle_testlogger-12" aria-hidden="true" tabindex="-1"></a>    showSummary <span class="op">=</span> <span class="kw">true</span></span>
<span id="list:gradle_testlogger-13"><a href="#list:gradle_testlogger-13" aria-hidden="true" tabindex="-1"></a>    showSimpleNames <span class="op">=</span> <span class="kw">false</span></span>
<span id="list:gradle_testlogger-14"><a href="#list:gradle_testlogger-14" aria-hidden="true" tabindex="-1"></a>    showPassed <span class="op">=</span> <span class="kw">true</span></span>
<span id="list:gradle_testlogger-15"><a href="#list:gradle_testlogger-15" aria-hidden="true" tabindex="-1"></a>    showSkipped <span class="op">=</span> <span class="kw">true</span></span>
<span id="list:gradle_testlogger-16"><a href="#list:gradle_testlogger-16" aria-hidden="true" tabindex="-1"></a>    showFailed <span class="op">=</span> <span class="kw">true</span></span>
<span id="list:gradle_testlogger-17"><a href="#list:gradle_testlogger-17" aria-hidden="true" tabindex="-1"></a>    showOnlySlow <span class="op">=</span> <span class="kw">false</span></span>
<span id="list:gradle_testlogger-18"><a href="#list:gradle_testlogger-18" aria-hidden="true" tabindex="-1"></a>    showStandardStreams <span class="op">=</span> <span class="kw">false</span></span>
<span id="list:gradle_testlogger-19"><a href="#list:gradle_testlogger-19" aria-hidden="true" tabindex="-1"></a>    showPassedStandardStreams <span class="op">=</span> <span class="kw">true</span></span>
<span id="list:gradle_testlogger-20"><a href="#list:gradle_testlogger-20" aria-hidden="true" tabindex="-1"></a>    showSkippedStandardStreams <span class="op">=</span> <span class="kw">true</span></span>
<span id="list:gradle_testlogger-21"><a href="#list:gradle_testlogger-21" aria-hidden="true" tabindex="-1"></a>    showFailedStandardStreams <span class="op">=</span> <span class="kw">true</span></span>
<span id="list:gradle_testlogger-22"><a href="#list:gradle_testlogger-22" aria-hidden="true" tabindex="-1"></a>    logLevel <span class="op">=</span> LogLevel<span class="op">.</span><span class="fu">LIFECYCLE</span></span>
<span id="list:gradle_testlogger-23"><a href="#list:gradle_testlogger-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="act-per-testare-ci">Act per testare CI</h3>
<p>È stato trovato un utilissimo strumento per poter velocizzare il
processo di creazione della CI, <a
href="https://github.com/nektos/act"><u>Act</u></a>. Questo strumento
permette di eseguire le GitHub Actions localmente senza dover
obbligatoriamente fare un push sul repository e quindi senza "sporcare"
la cronologia dei commit. Richiede che Docker sia attivo ed è in grado
di creare un container che utilizza l’immagine specificata nel file di
configurazione della CI e di eseguire i job. Per eseguire Act è stato
creato uno script in bash per poter automatizzare ulteriormente il
testing delle CI, in cui viene letto il contenuto del file .env.example
che popolerà l’environment del container con le variabili d’ambiente
necessarie per il corretto funzionamento della CI, e le imposta come
variabili d’ambiente della GitHub Action che si sta testando. Per poter
usare Act è necessario semplificare leggermente il trigger per i job,
che in ambiente di produzione è solitamente la chiusura di una pull
request, mentre per testare velocemente è necessario impostarlo su una
push.</p>
<h2 id="code_quality">Code quality e linting</h2>
<p>Durante lo sviluppo dei servizi è stata adottata una politica di code
quality e linting per garantire la coerenza e la leggibilità del
codice.</p>
<p>Per i servizi in Node.js, sono stati utilizzati ESLint assieme a
Prettier. ESLint è uno strumento di analisi statica del codice che aiuta
a identificare e correggere gli errori di codice, le pratiche non
ottimali e le violazioni dello stile di codice. Questi strumenti
necessitano soltanto di un file di configurazione che è presente nelle
repository e che i software per la scrittura di codice, come ad esempio
VSCode, possono adoperare.</p>
<p>Il componente in Java ha adottato Checkstyle, un tool di analisi
statica del codice che aiuta a garantire che il codice Java rispetti uno
standard di codifica predefinito. Anche in questo caso è stato
sufficiente aggiungere una dipendenza nel build.gradle per ottenere un
report dettagliato e comprensibile ed un file di configurazione che è
stato inserito nella repository. Per automatizzare il processo di
formattazione del codice il più possibile è stata aggiunta la libreria
<a href="https://github.com/diffplug/spotless"><u>Spotless</u></a>.
L’aggiunta di queste dipendenze nel file build.gradle è stata
sufficiente per garantire la formattazione del codice e la sua
coerenza.</p>
<div class="sourceCode" id="list:gradle_codequality"
data-language="Java" data-caption="Code quality"
label="list:gradle_codequality"><pre
class="sourceCode java"><code class="sourceCode java"><span id="list:gradle_codequality-1"><a href="#list:gradle_codequality-1" aria-hidden="true" tabindex="-1"></a>spotless <span class="op">{</span></span>
<span id="list:gradle_codequality-2"><a href="#list:gradle_codequality-2" aria-hidden="true" tabindex="-1"></a>    java <span class="op">{</span></span>
<span id="list:gradle_codequality-3"><a href="#list:gradle_codequality-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">importOrder</span><span class="op">()</span> <span class="co">// standard import order</span></span>
<span id="list:gradle_codequality-4"><a href="#list:gradle_codequality-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">removeUnusedImports</span><span class="op">()</span></span>
<span id="list:gradle_codequality-5"><a href="#list:gradle_codequality-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">googleJavaFormat</span><span class="op">()</span> <span class="co">// has its own section below</span></span>
<span id="list:gradle_codequality-6"><a href="#list:gradle_codequality-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">eclipse</span><span class="op">()</span>          <span class="co">// has its own section below</span></span>
<span id="list:gradle_codequality-7"><a href="#list:gradle_codequality-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="list:gradle_codequality-8"><a href="#list:gradle_codequality-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="list:gradle_codequality-9"><a href="#list:gradle_codequality-9" aria-hidden="true" tabindex="-1"></a>checkstyle <span class="op">{</span></span>
<span id="list:gradle_codequality-10"><a href="#list:gradle_codequality-10" aria-hidden="true" tabindex="-1"></a>    toolVersion <span class="op">=</span> <span class="st">&quot;8.44&quot;</span> <span class="co">// Versione di Checkstyle</span></span>
<span id="list:gradle_codequality-11"><a href="#list:gradle_codequality-11" aria-hidden="true" tabindex="-1"></a>    configFile <span class="op">=</span> <span class="fu">file</span><span class="op">(</span><span class="st">&quot;${rootDir}/config/checkstyle/checkstyle.xml&quot;</span><span class="op">)</span> <span class="co">// Configurazione di Checkstyle</span></span>
<span id="list:gradle_codequality-12"><a href="#list:gradle_codequality-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">// showViolations = true</span></span>
<span id="list:gradle_codequality-13"><a href="#list:gradle_codequality-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="checkstyle-javadoc-github-page">Checkstyle, javadoc, github page
</h3>
<p>Dopo aver eseguito i controlli di stile sul codice sono stati trovati
numerosi errori e warning, che sono stati corretti automaticamente da un
plugin che ha sistemato ciò che Spotless non era riuscito a correggere.
Il plugin in questione è <a
href="https://github.com/openrewrite/rewrite"><u>OpenRewrite</u></a>,
che ha permesso di correggere molti errori e di risparmiare un lungo e
noioso lavoro di correzione manuale.</p>
<div class="sourceCode" id="list:openrewrite" data-language="Bash"
data-caption="Output di OpenRewrite" label="list:openrewrite"><pre
class="sourceCode Bash"><code class="sourceCode bash"><span id="list:openrewrite-1"><a href="#list:openrewrite-1" aria-hidden="true" tabindex="-1"></a><span class="ex">Changes</span> have been made to app<span class="dt">\s</span>rc<span class="dt">\m</span>ain<span class="dt">\j</span>ava<span class="dt">\u</span>serModule<span class="dt">\U</span>serController.java by:</span>
<span id="list:openrewrite-2"><a href="#list:openrewrite-2" aria-hidden="true" tabindex="-1"></a>    <span class="ex">org.openrewrite.staticanalysis.CodeCleanup</span></span>
<span id="list:openrewrite-3"><a href="#list:openrewrite-3" aria-hidden="true" tabindex="-1"></a>        <span class="ex">org.openrewrite.java.format.MethodParamPad</span></span>
<span id="list:openrewrite-4"><a href="#list:openrewrite-4" aria-hidden="true" tabindex="-1"></a><span class="ex">Changes</span> have been made to app<span class="dt">\s</span>rc<span class="dt">\m</span>ain<span class="dt">\j</span>ava<span class="dt">\u</span>serModule<span class="dt">\U</span>serService.java by:</span>
<span id="list:openrewrite-5"><a href="#list:openrewrite-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">org.openrewrite.staticanalysis.CodeCleanup</span></span>
<span id="list:openrewrite-6"><a href="#list:openrewrite-6" aria-hidden="true" tabindex="-1"></a>        <span class="ex">org.openrewrite.staticanalysis.NeedBraces</span></span>
<span id="list:openrewrite-7"><a href="#list:openrewrite-7" aria-hidden="true" tabindex="-1"></a><span class="ex">Changes</span> have been made to app<span class="dt">\s</span>rc<span class="dt">\t</span>est<span class="dt">\j</span>ava<span class="dt">\i</span>ntegration<span class="dt">\B</span>usinessLogicTestIntegration.java by:</span>
<span id="list:openrewrite-8"><a href="#list:openrewrite-8" aria-hidden="true" tabindex="-1"></a>    <span class="ex">org.openrewrite.staticanalysis.CodeCleanup</span></span>
<span id="list:openrewrite-9"><a href="#list:openrewrite-9" aria-hidden="true" tabindex="-1"></a>        <span class="ex">org.openrewrite.java.format.MethodParamPad</span></span>
<span id="list:openrewrite-10"><a href="#list:openrewrite-10" aria-hidden="true" tabindex="-1"></a><span class="ex">Please</span> review and commit the results.</span>
<span id="list:openrewrite-11"><a href="#list:openrewrite-11" aria-hidden="true" tabindex="-1"></a><span class="ex">Estimate</span> time saved: 1h 24m </span></code></pre></div>
<p>Dopo aver corretto gli errori di stile, è stato generato il Javadoc
per il codice, in modo da avere una documentazione automatica e
aggiornata. Inoltre, è stato creato un sito web tramite GitHub Pages per
avere una documentazione più user-friendly e facilmente accessibile.</p>
<p>Per fare ciò si è optato per l’utilizzo di una GitHub Action che,
tramite condizioni come una push su determinati branch, genera
automaticamente il Javadoc. Questa documentazione viene pubblicata su un
branch ‘javadoc‘, automaticamente creato, e tramite le impostazioni del
repository, viene pubblicata su GitHub Pages, in modo da avere una
documentazione sempre aggiornata e facilmente accessibile.</p>
<p><img src="report/img/github_javadoc.jpg" style="width:12cm"
alt="image" /><br />
La documentazione del componente middleware sarà sempre reperibile all’
indirizzo delle githubpages del progetto con il suffisso javadoc<br />
come ad esempio <a
href="https://sofy24.github.io/MiddlewareMaraffa/javadoc/"><u>https://sofy24.github.io/MiddlewareMaraffa/javadoc/</u></a>.</p>
<div class="sourceCode" id="list:javadoc_action" data-language="Bash"
data-caption="Configurazione della GitHub Action per il Javadoc"
label="list:javadoc_action"><pre class="sourceCode Bash"><code class="sourceCode bash"><span id="list:javadoc_action-1"><a href="#list:javadoc_action-1" aria-hidden="true" tabindex="-1"></a><span class="ex">name:</span> Deploy Javadoc</span>
<span id="list:javadoc_action-2"><a href="#list:javadoc_action-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:javadoc_action-3"><a href="#list:javadoc_action-3" aria-hidden="true" tabindex="-1"></a><span class="ex">on:</span></span>
<span id="list:javadoc_action-4"><a href="#list:javadoc_action-4" aria-hidden="true" tabindex="-1"></a>  <span class="ex">push:</span></span>
<span id="list:javadoc_action-5"><a href="#list:javadoc_action-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">branches:</span> [main, <span class="st">&quot;develop&quot;</span>, <span class="st">&quot;style-doc&quot;</span>]</span>
<span id="list:javadoc_action-6"><a href="#list:javadoc_action-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:javadoc_action-7"><a href="#list:javadoc_action-7" aria-hidden="true" tabindex="-1"></a><span class="ex">jobs:</span></span>
<span id="list:javadoc_action-8"><a href="#list:javadoc_action-8" aria-hidden="true" tabindex="-1"></a>  <span class="ex">publish:</span></span>
<span id="list:javadoc_action-9"><a href="#list:javadoc_action-9" aria-hidden="true" tabindex="-1"></a>    <span class="ex">runs-on:</span> ubuntu-22.04</span>
<span id="list:javadoc_action-10"><a href="#list:javadoc_action-10" aria-hidden="true" tabindex="-1"></a>    <span class="ex">permissions:</span></span>
<span id="list:javadoc_action-11"><a href="#list:javadoc_action-11" aria-hidden="true" tabindex="-1"></a>      <span class="ex">contents:</span> write <span class="co"># if you have a protection rule on your repository, you&#39;ll need to give write permission to the workflow.</span></span>
<span id="list:javadoc_action-12"><a href="#list:javadoc_action-12" aria-hidden="true" tabindex="-1"></a>    <span class="ex">steps:</span></span>
<span id="list:javadoc_action-13"><a href="#list:javadoc_action-13" aria-hidden="true" tabindex="-1"></a>      <span class="ex">-</span> name: Checkout</span>
<span id="list:javadoc_action-14"><a href="#list:javadoc_action-14" aria-hidden="true" tabindex="-1"></a>        <span class="ex">uses:</span> actions/checkout@v4</span>
<span id="list:javadoc_action-15"><a href="#list:javadoc_action-15" aria-hidden="true" tabindex="-1"></a>      <span class="ex">-</span> name: Deploy JavaDoc</span>
<span id="list:javadoc_action-16"><a href="#list:javadoc_action-16" aria-hidden="true" tabindex="-1"></a>        <span class="ex">uses:</span> MathieuSoysal/Javadoc-publisher.yml@v2.5.0</span>
<span id="list:javadoc_action-17"><a href="#list:javadoc_action-17" aria-hidden="true" tabindex="-1"></a>        <span class="ex">with:</span></span>
<span id="list:javadoc_action-18"><a href="#list:javadoc_action-18" aria-hidden="true" tabindex="-1"></a>          <span class="ex">GITHUB_TOKEN:</span> <span class="va">${</span><span class="er">{ secrets.GITHUB_TOKEN </span><span class="va">}</span>}</span>
<span id="list:javadoc_action-19"><a href="#list:javadoc_action-19" aria-hidden="true" tabindex="-1"></a>          <span class="ex">javadoc-source-folder:</span> app/build/docs/javadoc</span>
<span id="list:javadoc_action-20"><a href="#list:javadoc_action-20" aria-hidden="true" tabindex="-1"></a>          <span class="ex">javadoc-branch:</span> javadoc</span>
<span id="list:javadoc_action-21"><a href="#list:javadoc_action-21" aria-hidden="true" tabindex="-1"></a>          <span class="ex">java-version:</span> 20</span>
<span id="list:javadoc_action-22"><a href="#list:javadoc_action-22" aria-hidden="true" tabindex="-1"></a>          <span class="ex">target-folder:</span> javadoc  <span class="co"># url will be https://&lt;username&gt;.github.io/&lt;repo&gt;/javadoc, This can be left as nothing to generate javadocs in the root folder.</span></span>
<span id="list:javadoc_action-23"><a href="#list:javadoc_action-23" aria-hidden="true" tabindex="-1"></a>          <span class="ex">project:</span> gradle</span></code></pre></div>
<h2 id="containerization">Containerization</h2>
<p>Data l’architettura del progetto in microservizi, usare Docker per
creare un’immagine per ogni servizio è stata una scelta naturale.
L’obiettivo finale è avere un sistema facilmente deployabile e
scalabile, eseguibile velocemente in un ambiente generico, con uno stack
di container Docker che racchiuda tutto il sistema. Per fare ciò è stato
necessario creare un Dockerfile per ogni servizio, in modo da poter
creare un’immagine durante la fase di deploy della continuous
integration.</p>
<p>La <strong>strategia di containerizzazione</strong> per tutte le
immagini create è stata quella di utilizzare un’immagine base di Alpine,
in modo da avere immagini leggere e veloci da scaricare. Per ridurre la
dimensione delle immagini, si è utilizzata un’immagine di sviluppo per
compilare il codice e un’immagine di produzione per eseguire il codice
compilato, copiando solo i file necessari.</p>
<figure>
<p><img src="report/img/multi_stage.png" style="width:12cm"
alt="image" /><br />
</p>
<figcaption>Comparazione tra le immagini multi-stage e le immagini
tradizionali</figcaption>
</figure>
<h3 id="nodejs">NodeJS</h3>
<p>I servizi UserManagementMaraffa e BusinessLogic sono stati
containerizzati utilizzando un’immagine di Node.js. Nell’esempio sotto,
si può notare la distinzione tra i diversi stage.</p>
<div class="sourceCode" id="list:dockerfile_nodejs"
data-language="Python" data-caption="Dockerfile delle immagini NodeJS"
label="list:dockerfile_nodejs"><pre
class="sourceCode python"><code class="sourceCode python"><span id="list:dockerfile_nodejs-1"><a href="#list:dockerfile_nodejs-1" aria-hidden="true" tabindex="-1"></a>FROM node:<span class="dv">20</span><span class="op">-</span>alpine <span class="im">as</span> base</span>
<span id="list:dockerfile_nodejs-2"><a href="#list:dockerfile_nodejs-2" aria-hidden="true" tabindex="-1"></a>WORKDIR <span class="op">/</span>app</span>
<span id="list:dockerfile_nodejs-3"><a href="#list:dockerfile_nodejs-3" aria-hidden="true" tabindex="-1"></a>COPY yarn.lock package.json <span class="op">/</span>app<span class="op">/</span></span>
<span id="list:dockerfile_nodejs-4"><a href="#list:dockerfile_nodejs-4" aria-hidden="true" tabindex="-1"></a>RUN yarn install</span>
<span id="list:dockerfile_nodejs-5"><a href="#list:dockerfile_nodejs-5" aria-hidden="true" tabindex="-1"></a>COPY . <span class="op">/</span>app</span>
<span id="list:dockerfile_nodejs-6"><a href="#list:dockerfile_nodejs-6" aria-hidden="true" tabindex="-1"></a>RUN yarn build</span>
<span id="list:dockerfile_nodejs-7"><a href="#list:dockerfile_nodejs-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:dockerfile_nodejs-8"><a href="#list:dockerfile_nodejs-8" aria-hidden="true" tabindex="-1"></a>FROM node:<span class="dv">20</span><span class="op">-</span>alpine</span>
<span id="list:dockerfile_nodejs-9"><a href="#list:dockerfile_nodejs-9" aria-hidden="true" tabindex="-1"></a>WORKDIR <span class="op">/</span>app    </span>
<span id="list:dockerfile_nodejs-10"><a href="#list:dockerfile_nodejs-10" aria-hidden="true" tabindex="-1"></a>COPY <span class="op">--</span><span class="im">from</span><span class="op">=</span>base <span class="op">/</span>app<span class="op">/</span>package.json <span class="op">/</span>app<span class="op">/</span>package.json</span>
<span id="list:dockerfile_nodejs-11"><a href="#list:dockerfile_nodejs-11" aria-hidden="true" tabindex="-1"></a>COPY <span class="op">--</span><span class="im">from</span><span class="op">=</span>base <span class="op">/</span>app<span class="op">/</span>node_modules <span class="op">/</span>app<span class="op">/</span>node_modules</span>
<span id="list:dockerfile_nodejs-12"><a href="#list:dockerfile_nodejs-12" aria-hidden="true" tabindex="-1"></a>COPY <span class="op">--</span><span class="im">from</span><span class="op">=</span>base <span class="op">/</span>app<span class="op">/</span>dist <span class="op">/</span>app<span class="op">/</span>dist</span>
<span id="list:dockerfile_nodejs-13"><a href="#list:dockerfile_nodejs-13" aria-hidden="true" tabindex="-1"></a>EXPOSE <span class="dv">3000</span></span>
<span id="list:dockerfile_nodejs-14"><a href="#list:dockerfile_nodejs-14" aria-hidden="true" tabindex="-1"></a>CMD [<span class="st">&quot;node&quot;</span>,<span class="st">&quot;dist/main.js&quot;</span>]</span></code></pre></div>
<h3 id="java">Java</h3>
<p>La containerizzazione del middleware ha richiesto alcuni passaggi
aggiuntivi rispetto ai servizi in Node.js. È stato necessario adottare
immagini diverse per gli stage di build e produzione, quindi usare
un’immagine di Gradle per la build, nella quale eseguire i comandi di
Gradle, e un’immagine di OpenJDK per l’esecuzione del JAR prodotto dalla
build.</p>
<p>Per la compilazione con Gradle, nonostante non sia una pratica
corretta, è stato necessario mantenere nella repository il file
gradle-wrapper.jar, in quanto non era possibile scaricarlo durante la
build all’interno delle GitHub Actions. La build non utilizza il
classico comando di Gradle per generare il file .jar, ma un task
personalizzato che si occupa di generare il fatJar del servizio, poiché
le dipendenze non venivano gestite correttamente all’interno del normale
file .jar.</p>
<div class="sourceCode" id="list:gradle_fatJar" data-language="Java"
data-caption="Task del fatJar da includere nel container"
label="list:gradle_fatJar"><pre class="sourceCode java"><code class="sourceCode java"><span id="list:gradle_fatJar-1"><a href="#list:gradle_fatJar-1" aria-hidden="true" tabindex="-1"></a>tasks<span class="op">.</span><span class="fu">register</span><span class="op">&lt;</span>Jar<span class="op">&gt;(</span><span class="st">&quot;fatJar&quot;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="list:gradle_fatJar-2"><a href="#list:gradle_fatJar-2" aria-hidden="true" tabindex="-1"></a>    archiveBaseName<span class="op">.</span><span class="fu">set</span><span class="op">(</span><span class="st">&quot;Middleware&quot;</span><span class="op">)</span></span>
<span id="list:gradle_fatJar-3"><a href="#list:gradle_fatJar-3" aria-hidden="true" tabindex="-1"></a>    manifest <span class="op">{</span></span>
<span id="list:gradle_fatJar-4"><a href="#list:gradle_fatJar-4" aria-hidden="true" tabindex="-1"></a>        attributes<span class="op">[</span><span class="st">&quot;Main-Class&quot;</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;server.Main&quot;</span></span>
<span id="list:gradle_fatJar-5"><a href="#list:gradle_fatJar-5" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="list:gradle_fatJar-6"><a href="#list:gradle_fatJar-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">from</span><span class="op">(</span>sourceSets<span class="op">.</span><span class="fu">main</span><span class="op">.</span><span class="fu">get</span><span class="op">().</span><span class="fu">output</span><span class="op">)</span></span>
<span id="list:gradle_fatJar-7"><a href="#list:gradle_fatJar-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dependsOn</span><span class="op">(</span>configurations<span class="op">.</span><span class="fu">runtimeClasspath</span><span class="op">)</span></span>
<span id="list:gradle_fatJar-8"><a href="#list:gradle_fatJar-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">from</span><span class="op">({</span> configurations<span class="op">.</span><span class="fu">runtimeClasspath</span><span class="op">.</span><span class="fu">get</span><span class="op">().</span><span class="fu">filter</span> <span class="op">{</span> it<span class="op">.</span><span class="fu">name</span><span class="op">.</span><span class="fu">endsWith</span><span class="op">(</span><span class="st">&quot;jar&quot;</span><span class="op">)</span> <span class="op">}.</span><span class="fu">map</span> <span class="op">{</span> <span class="fu">zipTree</span><span class="op">(</span>it<span class="op">)</span> <span class="op">}</span> <span class="op">})</span></span>
<span id="list:gradle_fatJar-9"><a href="#list:gradle_fatJar-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">dependsOn</span><span class="op">(</span><span class="st">&quot;compileJava&quot;</span><span class="op">)</span></span>
<span id="list:gradle_fatJar-10"><a href="#list:gradle_fatJar-10" aria-hidden="true" tabindex="-1"></a>    duplicatesStrategy <span class="op">=</span> DuplicatesStrategy<span class="op">.</span><span class="fu">EXCLUDE</span> <span class="co">// Puoi utilizzare altre strategie come DuplicatesStrategy.WARN per avvisare ma non fermare la build</span></span>
<span id="list:gradle_fatJar-11"><a href="#list:gradle_fatJar-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="angular">Angular</h3>
<p>La containerizzazione del frontend ha richiesto l’utilizzo di
un’immagine di Node.js per lo stage di build, mentre per l’esecuzione è
stata utilizzata un’immagine di Nginx. Nginx serve per eseguire
l’applicazione all’interno del container e per poterla raggiungere
dall’esterno. Per fare ciò è stato necessario configurare Nginx tramite
un file di configurazione che ha permesso anche di gestire un’operazione
di reverse proxy per indirizzare le chiamate al backend.</p>
<div class="sourceCode" id="list:nginx_frontend" data-language="Python"
data-caption="Configurazione Nginx del front-end"
label="list:nginx_frontend"><pre class="sourceCode python"><code class="sourceCode python"><span id="list:nginx_frontend-1"><a href="#list:nginx_frontend-1" aria-hidden="true" tabindex="-1"></a>server {</span>
<span id="list:nginx_frontend-2"><a href="#list:nginx_frontend-2" aria-hidden="true" tabindex="-1"></a>    listen <span class="dv">80</span><span class="op">;</span></span>
<span id="list:nginx_frontend-3"><a href="#list:nginx_frontend-3" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="list:nginx_frontend-4"><a href="#list:nginx_frontend-4" aria-hidden="true" tabindex="-1"></a>    location <span class="op">/</span> {</span>
<span id="list:nginx_frontend-5"><a href="#list:nginx_frontend-5" aria-hidden="true" tabindex="-1"></a>        root <span class="op">/</span>usr<span class="op">/</span>share<span class="op">/</span>nginx<span class="op">/</span>html<span class="op">;</span></span>
<span id="list:nginx_frontend-6"><a href="#list:nginx_frontend-6" aria-hidden="true" tabindex="-1"></a>        index index.html index.htm<span class="op">;</span></span>
<span id="list:nginx_frontend-7"><a href="#list:nginx_frontend-7" aria-hidden="true" tabindex="-1"></a>        try_files $uri $uri<span class="op">/</span> <span class="op">/</span>index.html<span class="op">;</span></span>
<span id="list:nginx_frontend-8"><a href="#list:nginx_frontend-8" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="list:nginx_frontend-9"><a href="#list:nginx_frontend-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:nginx_frontend-10"><a href="#list:nginx_frontend-10" aria-hidden="true" tabindex="-1"></a>    location <span class="op">/</span>api<span class="op">/</span> {</span>
<span id="list:nginx_frontend-11"><a href="#list:nginx_frontend-11" aria-hidden="true" tabindex="-1"></a>        proxy_pass <span class="st">&quot;http://$</span><span class="sc">{API_HOST}</span><span class="st">:$</span><span class="sc">{API_PORT}</span><span class="st">/&quot;</span><span class="op">;</span></span>
<span id="list:nginx_frontend-12"><a href="#list:nginx_frontend-12" aria-hidden="true" tabindex="-1"></a>        proxy_http_version <span class="fl">1.1</span><span class="op">;</span></span>
<span id="list:nginx_frontend-13"><a href="#list:nginx_frontend-13" aria-hidden="true" tabindex="-1"></a>        proxy_set_header Upgrade $http_upgrade<span class="op">;</span></span>
<span id="list:nginx_frontend-14"><a href="#list:nginx_frontend-14" aria-hidden="true" tabindex="-1"></a>        proxy_set_header Connection <span class="st">&#39;upgrade&#39;</span><span class="op">;</span></span>
<span id="list:nginx_frontend-15"><a href="#list:nginx_frontend-15" aria-hidden="true" tabindex="-1"></a>        proxy_set_header Host $host<span class="op">;</span></span>
<span id="list:nginx_frontend-16"><a href="#list:nginx_frontend-16" aria-hidden="true" tabindex="-1"></a>        proxy_cache_bypass $http_upgrade<span class="op">;</span></span>
<span id="list:nginx_frontend-17"><a href="#list:nginx_frontend-17" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="list:nginx_frontend-18"><a href="#list:nginx_frontend-18" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>L’indirizzo del backend è stato configurato tramite variabili
d’ambiente, in modo da poterlo cambiare facilmente in base all’ambiente
in cui si trova il container, e queste variabili vengono sostituite a
seconda dell’ambiente di deploy in cui l’applicativo Angular viene
eseguito.</p>
<h2 id="lettura-variabili-dambiente-1">Lettura variabili d’ambiente</h2>
<p>Data la scelta di dockerizzare interamente i servizi, è stato
necessario l’utilizzo di variabili d’ambiente. Questo ha permesso di
creare un sistema di deploy molto flessibile, in cui è possibile
cambiare l’indirizzo del servizio a cui connettersi semplicemente
modificando il file di configurazione del Docker Compose. I servizi in
NodeJS leggono il contenuto delle variabili d’ambiente tramite il modulo
‘process.env‘, mentre i servizi in Java utilizzano ‘System.getenv‘.
Questi comportamenti sono corretti per lo sviluppo locale e per ambienti
di produzione in cui le variabili d’ambiente sono settate
correttamente.</p>
<p>Per quanto riguarda invece lo sviluppo in CI, è stato necessario
creare un file ‘.env.example‘ che contenesse tutte le variabili
d’ambiente necessarie al funzionamento del servizio, in modo da poterle
settare correttamente nel CI/CD, soprattutto per la fase di testing, e
metterlo sulla repository. È importante tenere a mente che non
dovrebbero mai essere caricati dati sensibili su strumenti di controllo
di versione. In questo caso, non ci sono database o account cloud
eventualmente raggiungibili dall’esterno.</p>
<h2 id="monitoraggio">Monitoraggio</h2>
<p>In un progetto composto da microservizi deployati con container, il
monitoraggio è essenziale per garantire il corretto funzionamento e la
performance ottimale del sistema. Per realizzare un monitoraggio
efficace dei container, sono stati impiegati i container di Grafana,
Prometheus e cAdvisor. Si ringrazia il lavoro di <a
href="https://medium.com/@sohammohite/docker-container-monitoring-with-cadvisor-prometheus-and-grafana-using-docker-compose-b47ec78efbc"><u>Soham
Mohite</u></a> per la configurazione e l’integrazione di questi
strumenti.</p>
<p><img src="report/img/monitor_schema.jpg" style="width:14cm"
alt="image" /><br />
</p>
<h3 id="grafana">Grafana</h3>
<p>Grafana è uno strumento open-source per la visualizzazione e
l’analisi delle metriche raccolte. Viene utilizzato per creare dashboard
personalizzate che mostrano lo stato e le performance dei microservizi.
Con Grafana, è possibile configurare alert che notificano immediatamente
eventuali problemi nel sistema, permettendo una risposta rapida e
mirata.</p>
<h3 id="prometheus">Prometheus</h3>
<p>Prometheus è un sistema di monitoraggio e di allarme progettato per
raccogliere e memorizzare metriche in serie temporali. È stato
configurato per raccogliere metriche dai container dei microservizi e da
cAdvisor. Prometheus esegue la raccolta dei dati a intervalli regolari e
li memorizza in un database time-series, rendendoli disponibili per
l’analisi e la visualizzazione in Grafana.</p>
<h3 id="cadvisor">cAdvisor</h3>
<p>cAdvisor (Container Advisor) è uno strumento che fornisce
informazioni sulle risorse utilizzate dai container, come CPU, memoria,
rete e disco. È stato integrato con Prometheus per raccogliere e
esportare le metriche dei container. cAdvisor offre una visione
dettagliata delle performance di ogni container, aiutando a identificare
e risolvere problemi di utilizzo delle risorse.</p>
<h3 id="integrazione-e-configurazione">Integrazione e
Configurazione</h3>
<p>L’integrazione di Grafana, Prometheus e cAdvisor ha permesso di
creare un sistema di monitoraggio completo. I container di cAdvisor
raccolgono le metriche di utilizzo delle risorse dai container dei
microservizi e le esportano a Prometheus. Prometheus memorizza queste
metriche e le rende disponibili per la visualizzazione in Grafana. Le
dashboard di Grafana sono configurate per mostrare le metriche chiave e
fornire un’analisi dettagliata dello stato del sistema.</p>
<p>La configurazione di questi strumenti è stata gestita tramite Docker
Compose, permettendo una facile implementazione e scalabilità del
sistema di monitoraggio. Le variabili d’ambiente e i file di
configurazione sono stati impostati per garantire la corretta
connessione e funzionamento dei container di monitoraggio.</p>
<div class="sourceCode" id="list:docker_compose_monitoring"
data-language="Python"
data-caption="Esempio di configurazione Docker Compose"
label="list:docker_compose_monitoring"><pre
class="sourceCode python"><code class="sourceCode python"><span id="list:docker_compose_monitoring-1"><a href="#list:docker_compose_monitoring-1" aria-hidden="true" tabindex="-1"></a>cadvisor:</span>
<span id="list:docker_compose_monitoring-2"><a href="#list:docker_compose_monitoring-2" aria-hidden="true" tabindex="-1"></a>    container_name: cadvisor</span>
<span id="list:docker_compose_monitoring-3"><a href="#list:docker_compose_monitoring-3" aria-hidden="true" tabindex="-1"></a>    image: gcr.io<span class="op">/</span>cadvisor<span class="op">/</span>cadvisor:latest</span>
<span id="list:docker_compose_monitoring-4"><a href="#list:docker_compose_monitoring-4" aria-hidden="true" tabindex="-1"></a>    ports:</span>
<span id="list:docker_compose_monitoring-5"><a href="#list:docker_compose_monitoring-5" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;8080:8080&quot;</span></span>
<span id="list:docker_compose_monitoring-6"><a href="#list:docker_compose_monitoring-6" aria-hidden="true" tabindex="-1"></a>    volumes:</span>
<span id="list:docker_compose_monitoring-7"><a href="#list:docker_compose_monitoring-7" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;/:/rootfs&quot;</span></span>
<span id="list:docker_compose_monitoring-8"><a href="#list:docker_compose_monitoring-8" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;/var/run:/var/run&quot;</span></span>
<span id="list:docker_compose_monitoring-9"><a href="#list:docker_compose_monitoring-9" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;/sys:/sys&quot;</span></span>
<span id="list:docker_compose_monitoring-10"><a href="#list:docker_compose_monitoring-10" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;/var/lib/docker/:/var/lib/docker&quot;</span></span>
<span id="list:docker_compose_monitoring-11"><a href="#list:docker_compose_monitoring-11" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;/dev/disk/:/dev/disk&quot;</span></span>
<span id="list:docker_compose_monitoring-12"><a href="#list:docker_compose_monitoring-12" aria-hidden="true" tabindex="-1"></a>    privileged: true</span>
<span id="list:docker_compose_monitoring-13"><a href="#list:docker_compose_monitoring-13" aria-hidden="true" tabindex="-1"></a>    devices:</span>
<span id="list:docker_compose_monitoring-14"><a href="#list:docker_compose_monitoring-14" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;/dev/kmsg&quot;</span></span>
<span id="list:docker_compose_monitoring-15"><a href="#list:docker_compose_monitoring-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose_monitoring-16"><a href="#list:docker_compose_monitoring-16" aria-hidden="true" tabindex="-1"></a>  prometheus:</span>
<span id="list:docker_compose_monitoring-17"><a href="#list:docker_compose_monitoring-17" aria-hidden="true" tabindex="-1"></a>    container_name: prometheus</span>
<span id="list:docker_compose_monitoring-18"><a href="#list:docker_compose_monitoring-18" aria-hidden="true" tabindex="-1"></a>    image: prom<span class="op">/</span>prometheus:latest</span>
<span id="list:docker_compose_monitoring-19"><a href="#list:docker_compose_monitoring-19" aria-hidden="true" tabindex="-1"></a>    ports:</span>
<span id="list:docker_compose_monitoring-20"><a href="#list:docker_compose_monitoring-20" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;9090:9090&quot;</span></span>
<span id="list:docker_compose_monitoring-21"><a href="#list:docker_compose_monitoring-21" aria-hidden="true" tabindex="-1"></a>    volumes:</span>
<span id="list:docker_compose_monitoring-22"><a href="#list:docker_compose_monitoring-22" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;./prometheus.yml:/etc/prometheus/prometheus.yml&quot;</span></span>
<span id="list:docker_compose_monitoring-23"><a href="#list:docker_compose_monitoring-23" aria-hidden="true" tabindex="-1"></a>    privileged: true</span>
<span id="list:docker_compose_monitoring-24"><a href="#list:docker_compose_monitoring-24" aria-hidden="true" tabindex="-1"></a>    depends_on:</span>
<span id="list:docker_compose_monitoring-25"><a href="#list:docker_compose_monitoring-25" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> cadvisor</span>
<span id="list:docker_compose_monitoring-26"><a href="#list:docker_compose_monitoring-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose_monitoring-27"><a href="#list:docker_compose_monitoring-27" aria-hidden="true" tabindex="-1"></a>  grafana:</span>
<span id="list:docker_compose_monitoring-28"><a href="#list:docker_compose_monitoring-28" aria-hidden="true" tabindex="-1"></a>    container_name: grafana</span>
<span id="list:docker_compose_monitoring-29"><a href="#list:docker_compose_monitoring-29" aria-hidden="true" tabindex="-1"></a>    image: grafana<span class="op">/</span>grafana:latest</span>
<span id="list:docker_compose_monitoring-30"><a href="#list:docker_compose_monitoring-30" aria-hidden="true" tabindex="-1"></a>    ports:</span>
<span id="list:docker_compose_monitoring-31"><a href="#list:docker_compose_monitoring-31" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;3000:3000&quot;</span></span>
<span id="list:docker_compose_monitoring-32"><a href="#list:docker_compose_monitoring-32" aria-hidden="true" tabindex="-1"></a>    environment:</span>
<span id="list:docker_compose_monitoring-33"><a href="#list:docker_compose_monitoring-33" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> GF_PATHS_PROVISIONING<span class="op">=/</span>etc<span class="op">/</span>grafana<span class="op">/</span>provisioning</span>
<span id="list:docker_compose_monitoring-34"><a href="#list:docker_compose_monitoring-34" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> DS_PROMETHEUS<span class="op">=</span>prometheus</span>
<span id="list:docker_compose_monitoring-35"><a href="#list:docker_compose_monitoring-35" aria-hidden="true" tabindex="-1"></a>    volumes:</span>
<span id="list:docker_compose_monitoring-36"><a href="#list:docker_compose_monitoring-36" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;grafana-data:/var/lib/grafana&quot;</span></span>
<span id="list:docker_compose_monitoring-37"><a href="#list:docker_compose_monitoring-37" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;./datasources.yml:/etc/grafana/provisioning/datasources/datasources.yml&quot;</span></span>
<span id="list:docker_compose_monitoring-38"><a href="#list:docker_compose_monitoring-38" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;./dashboard.json:/var/lib/grafana/dashboards/dashboard.json&quot;</span></span>
<span id="list:docker_compose_monitoring-39"><a href="#list:docker_compose_monitoring-39" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;./default.yaml:/etc/grafana/provisioning/dashboards/default.yaml&quot;</span></span>
<span id="list:docker_compose_monitoring-40"><a href="#list:docker_compose_monitoring-40" aria-hidden="true" tabindex="-1"></a>    privileged: true</span>
<span id="list:docker_compose_monitoring-41"><a href="#list:docker_compose_monitoring-41" aria-hidden="true" tabindex="-1"></a>    depends_on:</span>
<span id="list:docker_compose_monitoring-42"><a href="#list:docker_compose_monitoring-42" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> prometheus</span></code></pre></div>
<p>Con questa configurazione, il sistema di monitoraggio offre una
visione completa delle performance e dello stato dei microservizi,
permettendo di mantenere un’operatività ottimale e di intervenire
prontamente in caso di anomalie.</p>
<h2 id="docker-compose">Docker-compose</h2>
<p>Infine il risultato prodotto è stato un file docker-compose che
raggruppa tutti i servizi in un unico stack, definendo le dipendenze tra
i container e semplificando il deploy è stato creato un network interno
per poter permettere la comunicazione dei container tra di loro e
particolari network, invece, per connettere i database ai servizi che ne
fanno uso. Sono state inserite anche delle dipendenze tra i servizi, ad
esempio lo user service ha come vincolo che il container del database
sia avviato prima di esso. Sono stati inseriti dei servizi che
permettono di monitorare i database:</p>
<ul>
<li><p><strong>Adminer:</strong> un’interfaccia web per la gestione dei
database, che permette di visualizzare i dati, creare tabelle, eseguire
query e molto altro.</p></li>
<li><p><strong>Mongo Express:</strong> un’interfaccia web per la
gestione dei database MongoDB.</p></li>
</ul>
<div class="sourceCode" id="list:docker_compose" data-language="Python"
data-caption="Docker Compose di progetto"
label="list:docker_compose"><pre class="sourceCode python"><code class="sourceCode python"><span id="list:docker_compose-1"><a href="#list:docker_compose-1" aria-hidden="true" tabindex="-1"></a>version: <span class="st">&quot;3.8&quot;</span></span>
<span id="list:docker_compose-2"><a href="#list:docker_compose-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose-3"><a href="#list:docker_compose-3" aria-hidden="true" tabindex="-1"></a>networks:</span>
<span id="list:docker_compose-4"><a href="#list:docker_compose-4" aria-hidden="true" tabindex="-1"></a>  monitoring:</span>
<span id="list:docker_compose-5"><a href="#list:docker_compose-5" aria-hidden="true" tabindex="-1"></a>  internal:</span>
<span id="list:docker_compose-6"><a href="#list:docker_compose-6" aria-hidden="true" tabindex="-1"></a>  db:</span>
<span id="list:docker_compose-7"><a href="#list:docker_compose-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose-8"><a href="#list:docker_compose-8" aria-hidden="true" tabindex="-1"></a>services:</span>
<span id="list:docker_compose-9"><a href="#list:docker_compose-9" aria-hidden="true" tabindex="-1"></a>  mysql:</span>
<span id="list:docker_compose-10"><a href="#list:docker_compose-10" aria-hidden="true" tabindex="-1"></a>    image: mysql:<span class="fl">5.7</span></span>
<span id="list:docker_compose-11"><a href="#list:docker_compose-11" aria-hidden="true" tabindex="-1"></a>    networks:</span>
<span id="list:docker_compose-12"><a href="#list:docker_compose-12" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> internal</span>
<span id="list:docker_compose-13"><a href="#list:docker_compose-13" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> db</span>
<span id="list:docker_compose-14"><a href="#list:docker_compose-14" aria-hidden="true" tabindex="-1"></a>    environment:</span>
<span id="list:docker_compose-15"><a href="#list:docker_compose-15" aria-hidden="true" tabindex="-1"></a>      MYSQL_ROOT_PASSWORD: root_password</span>
<span id="list:docker_compose-16"><a href="#list:docker_compose-16" aria-hidden="true" tabindex="-1"></a>      MYSQL_DATABASE: ${MARAFFA_SQL_DB}</span>
<span id="list:docker_compose-17"><a href="#list:docker_compose-17" aria-hidden="true" tabindex="-1"></a>      MYSQL_USER: ${MARAFFA_SQL_USER}</span>
<span id="list:docker_compose-18"><a href="#list:docker_compose-18" aria-hidden="true" tabindex="-1"></a>      MYSQL_PASSWORD: ${MARAFFA_SQL_PWD}</span>
<span id="list:docker_compose-19"><a href="#list:docker_compose-19" aria-hidden="true" tabindex="-1"></a>    ports:</span>
<span id="list:docker_compose-20"><a href="#list:docker_compose-20" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;3306:3306&quot;</span></span>
<span id="list:docker_compose-21"><a href="#list:docker_compose-21" aria-hidden="true" tabindex="-1"></a>    volumes:</span>
<span id="list:docker_compose-22"><a href="#list:docker_compose-22" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> mysql_volume:<span class="op">/</span>var<span class="op">/</span>lib<span class="op">/</span>mysql</span>
<span id="list:docker_compose-23"><a href="#list:docker_compose-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose-24"><a href="#list:docker_compose-24" aria-hidden="true" tabindex="-1"></a>  mongo:</span>
<span id="list:docker_compose-25"><a href="#list:docker_compose-25" aria-hidden="true" tabindex="-1"></a>    image: mongo:<span class="fl">5.0</span></span>
<span id="list:docker_compose-26"><a href="#list:docker_compose-26" aria-hidden="true" tabindex="-1"></a>    networks:</span>
<span id="list:docker_compose-27"><a href="#list:docker_compose-27" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> internal</span>
<span id="list:docker_compose-28"><a href="#list:docker_compose-28" aria-hidden="true" tabindex="-1"></a>    environment:</span>
<span id="list:docker_compose-29"><a href="#list:docker_compose-29" aria-hidden="true" tabindex="-1"></a>      MONGO_INITDB_ROOT_USERNAME: ${MONGO_USER}</span>
<span id="list:docker_compose-30"><a href="#list:docker_compose-30" aria-hidden="true" tabindex="-1"></a>      MONGO_INITDB_ROOT_PASSWORD: ${MONGO_PWD}</span>
<span id="list:docker_compose-31"><a href="#list:docker_compose-31" aria-hidden="true" tabindex="-1"></a>      <span class="co"># MONGO_INITDB_DATABASE: your_mongo_database</span></span>
<span id="list:docker_compose-32"><a href="#list:docker_compose-32" aria-hidden="true" tabindex="-1"></a>    expose:</span>
<span id="list:docker_compose-33"><a href="#list:docker_compose-33" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="dv">27012</span></span>
<span id="list:docker_compose-34"><a href="#list:docker_compose-34" aria-hidden="true" tabindex="-1"></a>    ports:</span>
<span id="list:docker_compose-35"><a href="#list:docker_compose-35" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="dv">27012</span>:<span class="dv">27017</span></span>
<span id="list:docker_compose-36"><a href="#list:docker_compose-36" aria-hidden="true" tabindex="-1"></a>    volumes:</span>
<span id="list:docker_compose-37"><a href="#list:docker_compose-37" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> mongo_volume:<span class="op">/</span>data<span class="op">/</span>db</span>
<span id="list:docker_compose-38"><a href="#list:docker_compose-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose-39"><a href="#list:docker_compose-39" aria-hidden="true" tabindex="-1"></a>  adminer:</span>
<span id="list:docker_compose-40"><a href="#list:docker_compose-40" aria-hidden="true" tabindex="-1"></a>    image: adminer:latest</span>
<span id="list:docker_compose-41"><a href="#list:docker_compose-41" aria-hidden="true" tabindex="-1"></a>    networks:</span>
<span id="list:docker_compose-42"><a href="#list:docker_compose-42" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> db</span>
<span id="list:docker_compose-43"><a href="#list:docker_compose-43" aria-hidden="true" tabindex="-1"></a>    ports:</span>
<span id="list:docker_compose-44"><a href="#list:docker_compose-44" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;8090:8080&quot;</span></span>
<span id="list:docker_compose-45"><a href="#list:docker_compose-45" aria-hidden="true" tabindex="-1"></a>    depends_on:</span>
<span id="list:docker_compose-46"><a href="#list:docker_compose-46" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> mysql</span>
<span id="list:docker_compose-47"><a href="#list:docker_compose-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose-48"><a href="#list:docker_compose-48" aria-hidden="true" tabindex="-1"></a>  mongo<span class="op">-</span>express:</span>
<span id="list:docker_compose-49"><a href="#list:docker_compose-49" aria-hidden="true" tabindex="-1"></a>    image: mongo<span class="op">-</span>express:<span class="fl">1.0.2</span></span>
<span id="list:docker_compose-50"><a href="#list:docker_compose-50" aria-hidden="true" tabindex="-1"></a>    networks:</span>
<span id="list:docker_compose-51"><a href="#list:docker_compose-51" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> internal</span>
<span id="list:docker_compose-52"><a href="#list:docker_compose-52" aria-hidden="true" tabindex="-1"></a>    ports:</span>
<span id="list:docker_compose-53"><a href="#list:docker_compose-53" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;8081:8081&quot;</span></span>
<span id="list:docker_compose-54"><a href="#list:docker_compose-54" aria-hidden="true" tabindex="-1"></a>    environment:</span>
<span id="list:docker_compose-55"><a href="#list:docker_compose-55" aria-hidden="true" tabindex="-1"></a>      ME_CONFIG_MONGODB_SERVER: mongo</span>
<span id="list:docker_compose-56"><a href="#list:docker_compose-56" aria-hidden="true" tabindex="-1"></a>      ME_CONFIG_MONGODB_URL: mongodb:<span class="op">//</span>${MONGO_USER}:${MONGO_PWD}<span class="op">@</span>mongo:<span class="dv">27017</span><span class="op">/</span></span>
<span id="list:docker_compose-57"><a href="#list:docker_compose-57" aria-hidden="true" tabindex="-1"></a>      ME_CONFIG_MONGODB_AUTH_USERNAME: ${MONGO_USER}</span>
<span id="list:docker_compose-58"><a href="#list:docker_compose-58" aria-hidden="true" tabindex="-1"></a>      ME_CONFIG_MONGODB_AUTH_PASSWORD: ${MONGO_PWD}</span>
<span id="list:docker_compose-59"><a href="#list:docker_compose-59" aria-hidden="true" tabindex="-1"></a>    depends_on:</span>
<span id="list:docker_compose-60"><a href="#list:docker_compose-60" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> mongo</span>
<span id="list:docker_compose-61"><a href="#list:docker_compose-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose-62"><a href="#list:docker_compose-62" aria-hidden="true" tabindex="-1"></a>  user<span class="op">-</span>service:</span>
<span id="list:docker_compose-63"><a href="#list:docker_compose-63" aria-hidden="true" tabindex="-1"></a>    image: ghcr.io<span class="op">/</span>sofy24<span class="op">/</span>user<span class="op">-</span>management<span class="op">-</span>maraffa:${USER_SERVICE_TAG}</span>
<span id="list:docker_compose-64"><a href="#list:docker_compose-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># container_name: user_service_container</span></span>
<span id="list:docker_compose-65"><a href="#list:docker_compose-65" aria-hidden="true" tabindex="-1"></a>    networks:</span>
<span id="list:docker_compose-66"><a href="#list:docker_compose-66" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> db</span>
<span id="list:docker_compose-67"><a href="#list:docker_compose-67" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> internal</span>
<span id="list:docker_compose-68"><a href="#list:docker_compose-68" aria-hidden="true" tabindex="-1"></a>    ports:</span>
<span id="list:docker_compose-69"><a href="#list:docker_compose-69" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;3001:3001&quot;</span></span>
<span id="list:docker_compose-70"><a href="#list:docker_compose-70" aria-hidden="true" tabindex="-1"></a>    environment:</span>
<span id="list:docker_compose-71"><a href="#list:docker_compose-71" aria-hidden="true" tabindex="-1"></a>      DB_HOST: mysql</span>
<span id="list:docker_compose-72"><a href="#list:docker_compose-72" aria-hidden="true" tabindex="-1"></a>      DB_PORT: <span class="dv">3306</span></span>
<span id="list:docker_compose-73"><a href="#list:docker_compose-73" aria-hidden="true" tabindex="-1"></a>      DB_USERNAME: ${MARAFFA_SQL_USER}</span>
<span id="list:docker_compose-74"><a href="#list:docker_compose-74" aria-hidden="true" tabindex="-1"></a>      DB_PASSWORD: ${MARAFFA_SQL_PWD}</span>
<span id="list:docker_compose-75"><a href="#list:docker_compose-75" aria-hidden="true" tabindex="-1"></a>      DB_NAME: ${MARAFFA_SQL_DB}</span>
<span id="list:docker_compose-76"><a href="#list:docker_compose-76" aria-hidden="true" tabindex="-1"></a>      PORT: <span class="dv">3001</span></span>
<span id="list:docker_compose-77"><a href="#list:docker_compose-77" aria-hidden="true" tabindex="-1"></a>    depends_on:</span>
<span id="list:docker_compose-78"><a href="#list:docker_compose-78" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> mysql</span>
<span id="list:docker_compose-79"><a href="#list:docker_compose-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose-80"><a href="#list:docker_compose-80" aria-hidden="true" tabindex="-1"></a>  business<span class="op">-</span>logic:</span>
<span id="list:docker_compose-81"><a href="#list:docker_compose-81" aria-hidden="true" tabindex="-1"></a>    image: ghcr.io<span class="op">/</span>sofy24<span class="op">/</span>business<span class="op">-</span>logic<span class="op">-</span>maraffa:${BL_TAG}</span>
<span id="list:docker_compose-82"><a href="#list:docker_compose-82" aria-hidden="true" tabindex="-1"></a>    networks:</span>
<span id="list:docker_compose-83"><a href="#list:docker_compose-83" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> internal</span>
<span id="list:docker_compose-84"><a href="#list:docker_compose-84" aria-hidden="true" tabindex="-1"></a>    ports:</span>
<span id="list:docker_compose-85"><a href="#list:docker_compose-85" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;3000:3000&quot;</span></span>
<span id="list:docker_compose-86"><a href="#list:docker_compose-86" aria-hidden="true" tabindex="-1"></a>    depends_on:</span>
<span id="list:docker_compose-87"><a href="#list:docker_compose-87" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> mysql</span>
<span id="list:docker_compose-88"><a href="#list:docker_compose-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose-89"><a href="#list:docker_compose-89" aria-hidden="true" tabindex="-1"></a>  angular<span class="op">-</span>app:</span>
<span id="list:docker_compose-90"><a href="#list:docker_compose-90" aria-hidden="true" tabindex="-1"></a>    image: ghcr.io<span class="op">/</span>mega2799<span class="op">/</span>maraffa<span class="op">-</span>fe:${FE_TAG}</span>
<span id="list:docker_compose-91"><a href="#list:docker_compose-91" aria-hidden="true" tabindex="-1"></a>    networks:</span>
<span id="list:docker_compose-92"><a href="#list:docker_compose-92" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> internal</span>
<span id="list:docker_compose-93"><a href="#list:docker_compose-93" aria-hidden="true" tabindex="-1"></a>    ports:</span>
<span id="list:docker_compose-94"><a href="#list:docker_compose-94" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;80:80&quot;</span></span>
<span id="list:docker_compose-95"><a href="#list:docker_compose-95" aria-hidden="true" tabindex="-1"></a>    depends_on:</span>
<span id="list:docker_compose-96"><a href="#list:docker_compose-96" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> middleware</span>
<span id="list:docker_compose-97"><a href="#list:docker_compose-97" aria-hidden="true" tabindex="-1"></a>    environment:</span>
<span id="list:docker_compose-98"><a href="#list:docker_compose-98" aria-hidden="true" tabindex="-1"></a>      <span class="co"># API_HOST: ${API_HOST}</span></span>
<span id="list:docker_compose-99"><a href="#list:docker_compose-99" aria-hidden="true" tabindex="-1"></a>      <span class="co"># API_PORT: ${API_PORT}</span></span>
<span id="list:docker_compose-100"><a href="#list:docker_compose-100" aria-hidden="true" tabindex="-1"></a>      API_HOST: middleware</span>
<span id="list:docker_compose-101"><a href="#list:docker_compose-101" aria-hidden="true" tabindex="-1"></a>      <span class="co"># API_HOST: maraffaonlinepika-api-1</span></span>
<span id="list:docker_compose-102"><a href="#list:docker_compose-102" aria-hidden="true" tabindex="-1"></a>      API_PORT: <span class="dv">3003</span></span>
<span id="list:docker_compose-103"><a href="#list:docker_compose-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose-104"><a href="#list:docker_compose-104" aria-hidden="true" tabindex="-1"></a>  middleware:</span>
<span id="list:docker_compose-105"><a href="#list:docker_compose-105" aria-hidden="true" tabindex="-1"></a>    image: ghcr.io<span class="op">/</span>sofy24<span class="op">/</span>middleware<span class="op">-</span>maraffa:${MIDDLEWARE_TAG}</span>
<span id="list:docker_compose-106"><a href="#list:docker_compose-106" aria-hidden="true" tabindex="-1"></a>    ports:</span>
<span id="list:docker_compose-107"><a href="#list:docker_compose-107" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="dv">3003</span>:<span class="dv">3003</span></span>
<span id="list:docker_compose-108"><a href="#list:docker_compose-108" aria-hidden="true" tabindex="-1"></a>    networks:</span>
<span id="list:docker_compose-109"><a href="#list:docker_compose-109" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> internal</span>
<span id="list:docker_compose-110"><a href="#list:docker_compose-110" aria-hidden="true" tabindex="-1"></a>    depends_on:</span>
<span id="list:docker_compose-111"><a href="#list:docker_compose-111" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> mongo</span>
<span id="list:docker_compose-112"><a href="#list:docker_compose-112" aria-hidden="true" tabindex="-1"></a>    environment:</span>
<span id="list:docker_compose-113"><a href="#list:docker_compose-113" aria-hidden="true" tabindex="-1"></a>      <span class="co"># MIDDLEWARE_HOST: 127.0.0.1</span></span>
<span id="list:docker_compose-114"><a href="#list:docker_compose-114" aria-hidden="true" tabindex="-1"></a>      MIDDLEWARE_PORT: <span class="dv">3003</span></span>
<span id="list:docker_compose-115"><a href="#list:docker_compose-115" aria-hidden="true" tabindex="-1"></a>      BUSINESS_LOGIC_HOST: business<span class="op">-</span>logic</span>
<span id="list:docker_compose-116"><a href="#list:docker_compose-116" aria-hidden="true" tabindex="-1"></a>      BUSINESS_LOGIC_PORT: <span class="dv">3000</span></span>
<span id="list:docker_compose-117"><a href="#list:docker_compose-117" aria-hidden="true" tabindex="-1"></a>      USER_HOST: user<span class="op">-</span>service</span>
<span id="list:docker_compose-118"><a href="#list:docker_compose-118" aria-hidden="true" tabindex="-1"></a>      USER_PORT: <span class="dv">3001</span></span>
<span id="list:docker_compose-119"><a href="#list:docker_compose-119" aria-hidden="true" tabindex="-1"></a>      MONGO_USER: ${MONGO_USER}</span>
<span id="list:docker_compose-120"><a href="#list:docker_compose-120" aria-hidden="true" tabindex="-1"></a>      MONGO_PASSWORD: ${MONGO_PWD}</span>
<span id="list:docker_compose-121"><a href="#list:docker_compose-121" aria-hidden="true" tabindex="-1"></a>      MONGO_HOST: mongo</span>
<span id="list:docker_compose-122"><a href="#list:docker_compose-122" aria-hidden="true" tabindex="-1"></a>      MONGO_PORT: <span class="dv">27017</span></span>
<span id="list:docker_compose-123"><a href="#list:docker_compose-123" aria-hidden="true" tabindex="-1"></a>      MONGO_DATABASE: ${MONGO_DB}</span>
<span id="list:docker_compose-124"><a href="#list:docker_compose-124" aria-hidden="true" tabindex="-1"></a>      DEBUG: true</span>
<span id="list:docker_compose-125"><a href="#list:docker_compose-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose-126"><a href="#list:docker_compose-126" aria-hidden="true" tabindex="-1"></a>  cadvisor:</span>
<span id="list:docker_compose-127"><a href="#list:docker_compose-127" aria-hidden="true" tabindex="-1"></a>    container_name: cadvisor</span>
<span id="list:docker_compose-128"><a href="#list:docker_compose-128" aria-hidden="true" tabindex="-1"></a>    image: gcr.io<span class="op">/</span>cadvisor<span class="op">/</span>cadvisor:latest</span>
<span id="list:docker_compose-129"><a href="#list:docker_compose-129" aria-hidden="true" tabindex="-1"></a>    ports:</span>
<span id="list:docker_compose-130"><a href="#list:docker_compose-130" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;8080:8080&quot;</span></span>
<span id="list:docker_compose-131"><a href="#list:docker_compose-131" aria-hidden="true" tabindex="-1"></a>    volumes:</span>
<span id="list:docker_compose-132"><a href="#list:docker_compose-132" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;/:/rootfs&quot;</span></span>
<span id="list:docker_compose-133"><a href="#list:docker_compose-133" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;/var/run:/var/run&quot;</span></span>
<span id="list:docker_compose-134"><a href="#list:docker_compose-134" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;/sys:/sys&quot;</span></span>
<span id="list:docker_compose-135"><a href="#list:docker_compose-135" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;/var/lib/docker/:/var/lib/docker&quot;</span></span>
<span id="list:docker_compose-136"><a href="#list:docker_compose-136" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;/dev/disk/:/dev/disk&quot;</span></span>
<span id="list:docker_compose-137"><a href="#list:docker_compose-137" aria-hidden="true" tabindex="-1"></a>    privileged: true</span>
<span id="list:docker_compose-138"><a href="#list:docker_compose-138" aria-hidden="true" tabindex="-1"></a>    devices:</span>
<span id="list:docker_compose-139"><a href="#list:docker_compose-139" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;/dev/kmsg&quot;</span></span>
<span id="list:docker_compose-140"><a href="#list:docker_compose-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose-141"><a href="#list:docker_compose-141" aria-hidden="true" tabindex="-1"></a>  prometheus:</span>
<span id="list:docker_compose-142"><a href="#list:docker_compose-142" aria-hidden="true" tabindex="-1"></a>    container_name: prometheus</span>
<span id="list:docker_compose-143"><a href="#list:docker_compose-143" aria-hidden="true" tabindex="-1"></a>    image: prom<span class="op">/</span>prometheus:latest</span>
<span id="list:docker_compose-144"><a href="#list:docker_compose-144" aria-hidden="true" tabindex="-1"></a>    ports:</span>
<span id="list:docker_compose-145"><a href="#list:docker_compose-145" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;9090:9090&quot;</span></span>
<span id="list:docker_compose-146"><a href="#list:docker_compose-146" aria-hidden="true" tabindex="-1"></a>    volumes:</span>
<span id="list:docker_compose-147"><a href="#list:docker_compose-147" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;./prometheus.yml:/etc/prometheus/prometheus.yml&quot;</span></span>
<span id="list:docker_compose-148"><a href="#list:docker_compose-148" aria-hidden="true" tabindex="-1"></a>    privileged: true</span>
<span id="list:docker_compose-149"><a href="#list:docker_compose-149" aria-hidden="true" tabindex="-1"></a>    depends_on:</span>
<span id="list:docker_compose-150"><a href="#list:docker_compose-150" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> cadvisor</span>
<span id="list:docker_compose-151"><a href="#list:docker_compose-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose-152"><a href="#list:docker_compose-152" aria-hidden="true" tabindex="-1"></a>  grafana:</span>
<span id="list:docker_compose-153"><a href="#list:docker_compose-153" aria-hidden="true" tabindex="-1"></a>    container_name: grafana</span>
<span id="list:docker_compose-154"><a href="#list:docker_compose-154" aria-hidden="true" tabindex="-1"></a>    image: grafana<span class="op">/</span>grafana:latest</span>
<span id="list:docker_compose-155"><a href="#list:docker_compose-155" aria-hidden="true" tabindex="-1"></a>    ports:</span>
<span id="list:docker_compose-156"><a href="#list:docker_compose-156" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;3005:3000&quot;</span></span>
<span id="list:docker_compose-157"><a href="#list:docker_compose-157" aria-hidden="true" tabindex="-1"></a>    environment:</span>
<span id="list:docker_compose-158"><a href="#list:docker_compose-158" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> GF_PATHS_PROVISIONING<span class="op">=/</span>etc<span class="op">/</span>grafana<span class="op">/</span>provisioning</span>
<span id="list:docker_compose-159"><a href="#list:docker_compose-159" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> DS_PROMETHEUS<span class="op">=</span>prometheus</span>
<span id="list:docker_compose-160"><a href="#list:docker_compose-160" aria-hidden="true" tabindex="-1"></a>    volumes:</span>
<span id="list:docker_compose-161"><a href="#list:docker_compose-161" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;grafana-data:/var/lib/grafana&quot;</span></span>
<span id="list:docker_compose-162"><a href="#list:docker_compose-162" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;./datasources.yml:/etc/grafana/provisioning/datasources/datasources.yml&quot;</span></span>
<span id="list:docker_compose-163"><a href="#list:docker_compose-163" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;./dashboard.json:/var/lib/grafana/dashboards/dashboard.json&quot;</span></span>
<span id="list:docker_compose-164"><a href="#list:docker_compose-164" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> <span class="st">&quot;./default.yaml:/etc/grafana/provisioning/dashboards/default.yaml&quot;</span></span>
<span id="list:docker_compose-165"><a href="#list:docker_compose-165" aria-hidden="true" tabindex="-1"></a>    privileged: true</span>
<span id="list:docker_compose-166"><a href="#list:docker_compose-166" aria-hidden="true" tabindex="-1"></a>    depends_on:</span>
<span id="list:docker_compose-167"><a href="#list:docker_compose-167" aria-hidden="true" tabindex="-1"></a>      <span class="op">-</span> prometheus</span>
<span id="list:docker_compose-168"><a href="#list:docker_compose-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="list:docker_compose-169"><a href="#list:docker_compose-169" aria-hidden="true" tabindex="-1"></a>volumes:</span>
<span id="list:docker_compose-170"><a href="#list:docker_compose-170" aria-hidden="true" tabindex="-1"></a>  mysql_volume:</span>
<span id="list:docker_compose-171"><a href="#list:docker_compose-171" aria-hidden="true" tabindex="-1"></a>  mongo_volume:</span>
<span id="list:docker_compose-172"><a href="#list:docker_compose-172" aria-hidden="true" tabindex="-1"></a>  rabbitmq_data:</span>
<span id="list:docker_compose-173"><a href="#list:docker_compose-173" aria-hidden="true" tabindex="-1"></a>  grafana<span class="op">-</span>data:</span></code></pre></div>
<h2 id="cicd">CI/CD</h2>
<p>È stata creata una CI/CD per questa relazione e possibili altre
future. Questo report è poi stato incluso a sua volta in un template
GitHub appositamente nato per lo sviluppo di nuove relazioni. Contiene
una serie di documenti in LaTeX, che rappresentano uno scheletro per le
relazioni, e la CI per poter pubblicare la relazione in continuous
integration in formato HTML sulla piattaforma GitHub Pages e fornire una
release contenente il PDF della relazione. L’utilizzo di GitHub rende lo
sviluppo della relazione più semplice, non obbligando a scegliere
strumenti come Overleaf come editor di testo, mantenendo la relazione
versionata e permettendo di lavorare in parallelo con altri membri del
team sfruttando tutte le comodità offerte da Git.</p>
<p>A questo <a
href="https://github.com/mega2799/Report-ghPages-latex"><u>link</u></a>
il template spiega alcuni dei passaggi per poterlo utilizzare. In
alternativa, è stato inserito anche un file bash che permette, tramite
un container Docker, di creare localmente il PDF della relazione
utilizzando i software pandoc e latexmk.</p>
<p>Sono stati fondamentali i lavori di <a
href="https://github.com/MemerGamer/LaTex-Publishing"><u>Memer
Gamer</u></a> per la base del workflow delle pubblicazioni su GitHub
Pages e <a
href="https://www.overleaf.com/latex/templates/university-of-reading-computer-science-report-template-and-guide/xhttddjhkwrf"><u>Varun
Ojha</u></a> per il template.</p>
<h1 id="ch:con">Conclusions and Future Work</h1>
<h2 id="conclusioni">Conclusioni</h2>
<p>L’implementazione delle pratiche DevOps in Maraffa Online ha fornito
notevoli miglioramenti nel processo di sviluppo software, contribuendo a
una maggiore efficienza, qualità e collaborazione all’interno del team.
L’automazione dei processi per la build automation ha ridotto
significativamente il tempo richiesto e sono stati evitati errori dovuti
a processi manuali come sviste. Inoltre, è stata data molta importanza
anche al miglioramento continuo: grazie a feedback costanti gli errori
sono stati rapidamente identificati e risolti andando ad aumentare anche
la qualità. Anche le pratiche di DevOps applicate sono migliorate con il
tempo. Inizialmente, a causa dell’inesperienza del team, sono state
abbozzate; tuttavia, attraverso un processo di apprendimento iterativo e
l’implementazione di best practices, sono state progressivamente
affinate. Questo perfezionamento ha portato a pipeline di sviluppo più
robuste, scalabili e adatte alle esigenze specifiche del progetto.</p>
            </div>
    </div>
  </div>
  <script src="https://vjs.zencdn.net/5.4.4/video.js"></script>

</body>
</html>
